<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Build Process • projr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Build Process">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">projr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.3-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/get-started.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/how-to-guides.html">How-to guides</a></li>
    <li><a class="dropdown-item" href="../articles/build-process.html">Build Process</a></li>
    <li><a class="dropdown-item" href="../articles/send-to-remotes.html">Sending to Remotes</a></li>
    <li><a class="dropdown-item" href="../articles/restore-artifacts.html">Restoring Artifacts</a></li>
    <li><a class="dropdown-item" href="../articles/environment.html">Environment Variables</a></li>
    <li><a class="dropdown-item" href="../articles/scripts-and-hooks.html">Scripts and Hooks</a></li>
    <li><a class="dropdown-item" href="../articles/concepts.html">Concepts</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Design</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
    <li><a class="dropdown-item" href="../BUILDLOG.html">Build log</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SATVILab/projr" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Build Process</h1>
            
      

      <div class="d-none name"><code>build-process.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="the-projr-build-process">The projr Build Process<a class="anchor" aria-label="anchor" href="#the-projr-build-process"></a>
</h2>
<p>This article provides a comprehensive guide to how projr builds work,
covering all three major stages (Pre-Build, Build, and Post-Build) and
what happens at each step.</p>
<hr>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<div class="section level4">
<h4 id="build-types">Build Types<a class="anchor" aria-label="anchor" href="#build-types"></a>
</h4>
<p>projr supports two types of builds:</p>
<p><strong>Production Builds</strong> - Create versioned releases with
full tracking: - <code><a href="../reference/projr_build.html">projr_build_major()</a></code> - Increment major
version (X.0.0) - <code><a href="../reference/projr_build.html">projr_build_minor()</a></code> - Increment minor
version (0.X.0) - <code><a href="../reference/projr_build.html">projr_build_patch()</a></code> - Increment patch
version (0.0.X) - Can run from either release or dev versions</p>
<p><strong>Development Builds</strong> - Quick iterations without
version changes: - <code><a href="../reference/projr_build_dev.html">projr_build_dev()</a></code> - Build without
incrementing version - Automatically bumps to dev version if not already
on one (e.g., 0.0.1 → 0.0.1-1)</p>
</div>
<div class="section level4">
<h4 id="build-architecture">Build Architecture<a class="anchor" aria-label="anchor" href="#build-architecture"></a>
</h4>
<p>Each build follows a three-stage architecture:</p>
<pre><code>┌─────────────┐
│  Pre-Build  │ ─── Preparation, validation, versioning
└──────┬──────┘
       │
       ▼
┌─────────────┐
│    Build    │ ─── Document rendering and script execution
└──────┬──────┘
       │
       ▼
┌─────────────┐
│ Post-Build  │ ─── Finalization, distribution, commits
└─────────────┘</code></pre>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="stage-1-pre-build-phase">Stage 1: Pre-Build Phase<a class="anchor" aria-label="anchor" href="#stage-1-pre-build-phase"></a>
</h3>
<p>The pre-build phase prepares the project environment and validates
that everything is ready for the build.</p>
<div class="section level4">
<h4 id="validation-and-checks">1.1 Validation and Checks<a class="anchor" aria-label="anchor" href="#validation-and-checks"></a>
</h4>
<p><strong>Purpose:</strong> Ensure all prerequisites are met before
starting the build.</p>
<p><strong>What happens:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Configuration validation</strong> -
<code><a href="../reference/projr_yml_check.html">projr_yml_check()</a></code> validates <code>_projr.yml</code>
</li>
<li>
<strong>Scripts and hooks validation</strong> - Verifies all
configured scripts and hooks exist</li>
<li>
<strong>Package availability check</strong> - Ensures required
packages (quarto, rmarkdown, etc.) are installed</li>
<li>
<strong>Authentication checks</strong> - Verifies GitHub PAT and OSF
tokens if needed for remote destinations</li>
<li>
<strong>Git repository check</strong> - Ensures Git is initialized
(creates it if needed and configured)</li>
<li>
<strong>GitHub remote check</strong> - Verifies GitHub remote exists
if push is enabled</li>
<li>
<strong>Upstream check</strong> - Ensures local repository is not
behind remote</li>
</ol>
<p><strong>Example error handling:</strong></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If packages are missing, build will stop with installation instructions</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Required packages not available for build:</span></span>
<span><span class="co">#&gt;   - quarto (install with: install.packages("quarto"))</span></span>
<span><span class="co">#&gt; Run projr_build_check_packages() to see all requirements</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="remote-destination-preparation">1.2 Remote Destination Preparation<a class="anchor" aria-label="anchor" href="#remote-destination-preparation"></a>
</h4>
<p><strong>Purpose:</strong> Set up GitHub releases or other remote
destinations for artifact distribution.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Creates GitHub releases if configured with
<code>archive_github</code> parameter</li>
<li>Prepares local archive directories if configured with
<code>archive_local</code> parameter</li>
</ul>
<p><strong>Configuration:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># In _projr.yml</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span><span class="at"> </span><span class="st">"archive"</span><span class="co">  # Create release named "archive"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="documentation-and-version-updates">1.3 Documentation and Version Updates<a class="anchor" aria-label="anchor" href="#documentation-and-version-updates"></a>
</h4>
<p><strong>Purpose:</strong> Update documentation and version tracking
files before the build.</p>
<p><strong>What happens:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>renv snapshot</strong> - Captures current package
dependencies (if renv is used)</li>
<li>
<strong>Ignore files update</strong> - Ensures
<code>.gitignore</code> and <code>.Rbuildignore</code> are current</li>
<li>
<strong>Documentation directory setup</strong> - Configures docs
directory (safe vs unsafe paths)</li>
<li>
<strong>Version enforcement</strong> - Ensures project is on a
development version before build</li>
</ol>
<p><strong>Key files affected:</strong></p>
<ul>
<li>
<code>renv.lock</code> - Package dependencies snapshot</li>
<li>
<code>.gitignore</code> - Ensures docs and output directories are
properly ignored</li>
<li>
<code>VERSION</code> or <code>DESCRIPTION</code> - Version
tracking</li>
</ul>
</div>
<div class="section level4">
<h4 id="version-calculation">1.4 Version Calculation<a class="anchor" aria-label="anchor" href="#version-calculation"></a>
</h4>
<p><strong>Purpose:</strong> Calculate the version numbers for different
build outcomes.</p>
<p><strong>What happens:</strong></p>
<p>projr calculates three version numbers:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Pre-run version</strong> - Current version (e.g.,
“0.0.1-dev”)</li>
<li>
<strong>Run version</strong> - Version during build (e.g., “0.0.2”
for production, “0.0.1-dev” for dev)</li>
<li>
<strong>Failure version</strong> - Version to revert to if build
fails (e.g., “0.0.1-dev”)</li>
</ol>
<p><strong>Example version transitions:</strong></p>
<pre><code>Production build (patch) from dev version:
  0.0.1-1 → 0.0.2 → 0.0.2-1 (success)
  0.0.1-1 → 0.0.2 → 0.0.1-1 (failure)

Development build from release version (auto-bumps to dev):
  0.0.1 → 0.0.1-1 → 0.0.1-1 (auto-bump)

Development build from dev version (no change):
  0.0.1-1 → 0.0.1-1 → 0.0.1-1 (no version change)</code></pre>
</div>
<div class="section level4">
<h4 id="pre-build-hooks">1.5 Pre-Build Hooks<a class="anchor" aria-label="anchor" href="#pre-build-hooks"></a>
</h4>
<p><strong>Purpose:</strong> Run custom scripts before the main
build.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Executes scripts configured in <code>build.hooks.pre</code>
(production) or <code>dev.hooks.pre</code> (development)</li>
<li>Scripts in <code>build.hooks.both</code> or
<code>dev.hooks.both</code> also run here</li>
<li>Hooks run in the order specified in <code>_projr.yml</code>
</li>
<li>Each hook is executed via <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> in the project
environment</li>
</ul>
<p><strong>Configuration examples:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Production hooks</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="at">    </span><span class="fu">pre</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> setup-data.R</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> check-dependencies.R</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="at">    </span><span class="fu">both</span><span class="kw">:</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> log-timestamp.R</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co"># Development hooks (exclusive for dev builds)</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="fu">dev</span><span class="kw">:</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="at">    </span><span class="fu">pre</span><span class="kw">:</span><span class="at"> quick-setup.R</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="at">    </span><span class="fu">both</span><span class="kw">:</span><span class="at"> dev-logger.R</span></span></code></pre></div>
<p><strong>Important:</strong> <code>build.hooks</code> are ignored in
dev builds, and <code>dev.hooks</code> are ignored in production
builds.</p>
</div>
<div class="section level4">
<h4 id="output-directory-preparation">1.6 Output Directory Preparation<a class="anchor" aria-label="anchor" href="#output-directory-preparation"></a>
</h4>
<p><strong>Purpose:</strong> Clear and prepare output directories based
on configuration.</p>
<p><strong>What happens:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Version setting</strong> - Sets project to run version
(e.g., “0.0.2”)</li>
<li>
<strong>Directory clearing</strong> - Based on
<code>clear_output</code> setting:
<ul>
<li>
<code>"pre"</code> (default for production): Clear output
directories now</li>
<li>
<code>"post"</code>: Clear after build completes</li>
<li>
<code>"never"</code>: Don’t clear directories</li>
</ul>
</li>
</ol>
<p><strong>Directory types:</strong></p>
<ul>
<li>
<strong>Safe directories</strong> - Temporary build locations in
cache (e.g., <code>_tmp/projr/v0.0.2/output</code>)</li>
<li>
<strong>Unsafe directories</strong> - Final output locations (e.g.,
<code>_output</code>, <code>docs</code>)</li>
</ul>
<p><strong>Environment variable:</strong></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set via environment variable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_CLEAR_OUTPUT <span class="op">=</span> <span class="st">"pre"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or via function parameter</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span>clear_output <span class="op">=</span> <span class="st">"pre"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="pre-build-git-commit">1.7 Pre-Build Git Commit<a class="anchor" aria-label="anchor" href="#pre-build-git-commit"></a>
</h4>
<p><strong>Purpose:</strong> Commit all changes made during pre-build
preparation.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Commits changes to version files, ignore files, and
documentation</li>
<li>Commit message is the fixed text “Snapshot pre-build”</li>
<li>Only runs if <code>build.git.commit</code> is <code>TRUE</code> in
<code>_projr.yml</code>
</li>
</ul>
<p><strong>Example commit message:</strong></p>
<pre><code>Snapshot pre-build</code></pre>
</div>
<div class="section level4">
<h4 id="manifest-creation-pre-build">1.8 Manifest Creation (Pre-Build)<a class="anchor" aria-label="anchor" href="#manifest-creation-pre-build"></a>
</h4>
<p><strong>Purpose:</strong> Record the state of input files before the
build.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Hashes all files in input directories (<code>raw-data</code>,
<code>cache</code>)</li>
<li>Creates temporary manifest file in cache directory</li>
<li>Stores relative file paths and MD5 hashes</li>
<li>This manifest will be merged with output hashes after the build</li>
</ul>
<p><strong>Manifest structure:</strong></p>
<table class="table">
<thead><tr class="header">
<th>label</th>
<th>fn</th>
<th>version</th>
<th>hash</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>raw-data</td>
<td>dataset.csv</td>
<td>v0.0.2</td>
<td>abc123…</td>
</tr>
<tr class="even">
<td>cache</td>
<td>processed.rds</td>
<td>v0.0.2</td>
<td>def456…</td>
</tr>
</tbody>
</table>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="stage-2-build-phase">Stage 2: Build Phase<a class="anchor" aria-label="anchor" href="#stage-2-build-phase"></a>
</h3>
<p>The build phase executes the actual document rendering or script
execution.</p>
<div class="section level4">
<h4 id="script-selection">2.1 Script Selection<a class="anchor" aria-label="anchor" href="#script-selection"></a>
</h4>
<p><strong>Purpose:</strong> Determine which documents or scripts to
build.</p>
<p><strong>Priority order:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong><code>file</code> parameter</strong> - Explicitly specified
files</li>
<li>
<strong><code>dev.scripts</code></strong> (dev builds) - Scripts
configured for development</li>
<li>
<strong><code>build.scripts</code></strong> (production builds, or
dev builds when <code>dev.scripts</code> not set) - Scripts configured
for production</li>
<li>
<strong>Engine-specific config</strong> - <code>_quarto.yml</code>
or <code>_bookdown.yml</code> project</li>
<li>
<strong>Auto-detection</strong> - Finds <code>.Rmd</code>,
<code>.qmd</code>, or <code>.R</code> files in project root</li>
</ol>
<p><strong>Configuration examples:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Production scripts</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="at">  </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> analysis.qmd</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> report.Rmd</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="co"># Development scripts (if not set, falls back to build.scripts)</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a><span class="fu">dev</span><span class="kw">:</span></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="at">  </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> quick-analysis.qmd</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="document-rendering">2.2 Document Rendering<a class="anchor" aria-label="anchor" href="#document-rendering"></a>
</h4>
<p><strong>Purpose:</strong> Render documents using the appropriate
engine.</p>
<p><strong>Supported engines:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Quarto</strong> - For <code>.qmd</code> files or Quarto
projects</li>
<li>
<strong>Bookdown</strong> - For bookdown projects (detected via
<code>_bookdown.yml</code>)</li>
<li>
<strong>R Markdown</strong> - For <code>.Rmd</code> files</li>
</ol>
<p><strong>What happens:</strong></p>
<ul>
<li>Engine is detected automatically or specified via configuration</li>
<li>Documents are rendered with arguments from <code>args_engine</code>
parameter</li>
<li>Output goes to the appropriate safe directory (cache-based temporary
location)</li>
<li>Rendering respects the project’s configuration files
(<code>_quarto.yml</code>, <code>_bookdown.yml</code>, etc.)</li>
</ul>
<p><strong>Custom engine arguments:</strong></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pass custom arguments to the rendering engine</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span>args_engine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  clean <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="script-execution">2.3 Script Execution<a class="anchor" aria-label="anchor" href="#script-execution"></a>
</h4>
<p><strong>Purpose:</strong> Execute R scripts that generate
outputs.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Plain <code>.R</code> files are executed via
<code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code>
</li>
<li>Scripts run in the project environment</li>
<li>Outputs should be written to appropriate directories
(<code>_output</code>, <code>docs</code>)</li>
</ul>
<p><strong>Best practices:</strong></p>
<ul>
<li>Use <code><a href="../reference/projr_path_get_dir.html">projr_path_get_dir()</a></code> to get correct output
paths</li>
<li>Write outputs to version-specific directories when needed</li>
<li>Keep scripts focused and modular</li>
</ul>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="stage-3-post-build-phase">Stage 3: Post-Build Phase<a class="anchor" aria-label="anchor" href="#stage-3-post-build-phase"></a>
</h3>
<p>The post-build phase finalizes artifacts, updates documentation, and
distributes outputs.</p>
<div class="section level4">
<h4 id="artifact-finalization">3.1 Artifact Finalization<a class="anchor" aria-label="anchor" href="#artifact-finalization"></a>
</h4>
<p><strong>Purpose:</strong> Move built artifacts from temporary to
final locations.</p>
<p><strong>What happens:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Output copying</strong> - Copies files from safe directories
to unsafe directories
<ul>
<li>
<code>_tmp/projr/v0.0.2/output</code> → <code>_output</code>
</li>
</ul>
</li>
<li>
<strong>Docs copying</strong> - Copies documentation from safe to
unsafe directories
<ul>
<li>Safe <code>docs</code> directory → <code>docs</code> (project
root)</li>
</ul>
</li>
<li>
<strong>Directory clearing (if “post”)</strong> - Clears directories
if <code>clear_output = "post"</code>
</li>
</ol>
<p><strong>Clearing behavior:</strong></p>
<pre><code>clear_output = "pre":  Clear before, final dirs contain latest + previous
clear_output = "post": Clear after, final dirs contain only latest
clear_output = "never": Never clear, all versions accumulate</code></pre>
</div>
<div class="section level4">
<h4 id="manifest-creation-post-build">3.2 Manifest Creation (Post-Build)<a class="anchor" aria-label="anchor" href="#manifest-creation-post-build"></a>
</h4>
<p><strong>Purpose:</strong> Record the state of output files after the
build.</p>
<p><strong>What happens:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>Hash output files</strong> - Hashes files in
<code>output</code> and <code>docs</code> directories</li>
<li>
<strong>Merge manifests</strong> - Combines pre-build and post-build
hashes</li>
<li>
<strong>Append to history</strong> - Adds current version to
<code>manifest.csv</code> at project root</li>
<li>
<strong>Preserve history</strong> - Maintains all previous versions
in the manifest</li>
</ol>
<p><strong>Query functions:</strong></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Changes between two versions</span></span>
<span><span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_changes</a></span><span class="op">(</span><span class="st">"0.0.1"</span>, <span class="st">"0.0.2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Changes across a range</span></span>
<span><span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_range</a></span><span class="op">(</span><span class="st">"0.0.1"</span>, <span class="st">"0.0.5"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Last changes</span></span>
<span><span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_last_change</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="documentation-updates">3.3 Documentation Updates<a class="anchor" aria-label="anchor" href="#documentation-updates"></a>
</h4>
<p><strong>Purpose:</strong> Update project documentation and metadata
files.</p>
<p><strong>What happens:</strong></p>
<ol style="list-style-type: decimal">
<li>
<strong>roxygen2 documentation</strong> - Regenerates
<code>.Rd</code> files if roxygen comments found</li>
<li>
<strong>Citation files</strong> - Updates version in:
<ul>
<li><code>CITATION.cff</code></li>
<li><code>codemeta.json</code></li>
<li><code>inst/CITATION</code></li>
</ul>
</li>
<li>
<strong>README rendering</strong> - Renders <code>README.Rmd</code>
if it exists</li>
<li>
<strong>BUILDLOG update</strong> - Adds build record with change
summary (production builds only)</li>
<li>
<strong>CHANGELOG update</strong> - Adds version entry if
configured</li>
</ol>
<p><strong>BUILDLOG entry structure:</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">## v0.0.2 (2024-01-15)</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>Build completed in 45.2 seconds</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">### Changes from v0.0.1 → v0.0.2</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="fu">#### Input Changes</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="ss">- </span>Modified: 2 files</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="ss">- </span>Added: 1 file</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="fu">#### Output Changes</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="ss">- </span>Modified: 5 files</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="ss">- </span>Added: 3 files</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="post-build-git-commit">3.4 Post-Build Git Commit<a class="anchor" aria-label="anchor" href="#post-build-git-commit"></a>
</h4>
<p><strong>Purpose:</strong> Commit all changes made during the
build.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Commits output files, documentation, manifest, and metadata</li>
<li>Commit message format: “Build v{version}: {message}”</li>
<li>Only runs if <code>build.git.commit</code> is <code>TRUE</code>
</li>
<li>Does NOT push yet (push happens later)</li>
</ul>
<p><strong>Example commit message:</strong></p>
<pre><code>Build v0.0.2: Build message here</code></pre>
</div>
<div class="section level4">
<h4 id="remote-distribution">3.5 Remote Distribution<a class="anchor" aria-label="anchor" href="#remote-distribution"></a>
</h4>
<p><strong>Purpose:</strong> Send artifacts to remote destinations
(GitHub, OSF, local archives).</p>
<p><strong>What happens:</strong></p>
<p>For each configured remote destination:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Determine send strategy</strong>:
<ul>
<li>
<code>"sync-diff"</code> - Sync only changed files</li>
<li>
<code>"sync-purge"</code> - Remove all, then upload all</li>
<li>
<code>"upload-all"</code> - Upload all files (may overwrite)</li>
<li>
<code>"upload-missing"</code> - Upload only files not on remote</li>
</ul>
</li>
<li>
<strong>Inspect remote</strong> (based on
<code>send_inspect</code>):
<ul>
<li>
<code>"manifest"</code> - Use manifest.csv to track versions</li>
<li>
<code>"file"</code> - Inspect actual files on remote</li>
<li>
<code>"none"</code> - Treat remote as empty</li>
</ul>
</li>
<li>
<strong>Apply send cue</strong>:
<ul>
<li>
<code>"always"</code> - Always create new remote version</li>
<li>
<code>"if-change"</code> - Only if content changed</li>
<li>
<code>"never"</code> - Never send</li>
</ul>
</li>
<li>
<strong>Create structure</strong>:
<ul>
<li>
<code>"latest"</code> - Overwrite files at destination</li>
<li>
<code>"archive"</code> - Create versioned subdirectories</li>
</ul>
</li>
</ol>
<p><strong>Configuration example:</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span><span class="at"> </span><span class="st">"archive"</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="at">    </span><span class="fu">structure</span><span class="kw">:</span><span class="at"> </span><span class="st">"archive"</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="at">    </span><span class="fu">send_cue</span><span class="kw">:</span><span class="at"> </span><span class="st">"if-change"</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="at">    </span><span class="fu">send_strategy</span><span class="kw">:</span><span class="at"> </span><span class="st">"sync-diff"</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="at">    </span><span class="fu">send_inspect</span><span class="kw">:</span><span class="at"> </span><span class="st">"manifest"</span></span></code></pre></div>
<p><strong>Debug output:</strong></p>
<p>When <code>PROJR_OUTPUT_LEVEL="debug"</code>, you’ll see detailed
information:</p>
<pre><code>Remote: github/archive (type: github, structure: archive)
Files to upload: 12
Strategy: sync-diff
Changed files: 3 modified, 2 added, 1 removed</code></pre>
</div>
<div class="section level4">
<h4 id="post-build-hooks">3.6 Post-Build Hooks<a class="anchor" aria-label="anchor" href="#post-build-hooks"></a>
</h4>
<p><strong>Purpose:</strong> Run custom scripts after the main build and
distribution.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Executes scripts configured in <code>build.hooks.post</code>
(production) or <code>dev.hooks.post</code> (development)</li>
<li>Scripts in <code>build.hooks.both</code> or
<code>dev.hooks.both</code> also run here</li>
<li>Hooks run in the order specified</li>
<li>Useful for notifications, cleanup, or additional processing</li>
</ul>
<p><strong>Example use cases:</strong></p>
<ul>
<li>Send email notifications</li>
<li>Update external dashboards</li>
<li>Create summary reports</li>
<li>Clean up temporary files</li>
<li>Trigger downstream processes</li>
</ul>
</div>
<div class="section level4">
<h4 id="development-version-setup">3.7 Development Version Setup<a class="anchor" aria-label="anchor" href="#development-version-setup"></a>
</h4>
<p><strong>Purpose:</strong> Set project back to a development version
after production build.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Only for production builds (not dev builds)</li>
<li>Appends development suffix to current version (e.g., “0.0.2” →
“0.0.2-1”)</li>
<li>Commits the version change with message “Begin v{version}”</li>
<li>Ensures project is ready for next development cycle</li>
<li>Any changes after this commit are segmented from the released
version</li>
</ul>
<p><strong>Version progression:</strong></p>
<pre><code>Build v0.0.2:
  Pre-build:  0.0.1-1 → 0.0.2
  Post-build: 0.0.2 → 0.0.2-1</code></pre>
</div>
<div class="section level4">
<h4 id="git-push">3.8 Git Push<a class="anchor" aria-label="anchor" href="#git-push"></a>
</h4>
<p><strong>Purpose:</strong> Push all commits to the remote
repository.</p>
<p><strong>What happens:</strong></p>
<ul>
<li>Pushes all commits made during the build</li>
<li>Only runs if <code>build.git.push</code> is <code>TRUE</code>
</li>
<li>Includes pre-build, post-build, and dev version commits</li>
</ul>
<p><strong>Configuration:</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="at">  </span><span class="fu">git</span><span class="kw">:</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="at">    </span><span class="fu">commit</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="at">    </span><span class="fu">push</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="at">    </span><span class="fu">add-untracked</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="manifest-system">Manifest System<a class="anchor" aria-label="anchor" href="#manifest-system"></a>
</h3>
<p>The manifest system tracks all file changes across versions.</p>
<div class="section level4">
<h4 id="how-it-works">How It Works<a class="anchor" aria-label="anchor" href="#how-it-works"></a>
</h4>
<p><strong>Pre-build:</strong> 1. Hash files in <code>raw-data</code>
and <code>cache</code> directories 2. Store in temporary manifest:
<code>_tmp/projr/{version}/manifest_pre.csv</code></p>
<p><strong>Post-build:</strong> 1. Hash files in <code>output</code> and
<code>docs</code> directories 2. Merge with pre-build manifest 3. Append
to project manifest: <code>manifest.csv</code></p>
</div>
<div class="section level4">
<h4 id="manifest-structure">Manifest Structure<a class="anchor" aria-label="anchor" href="#manifest-structure"></a>
</h4>
<pre class="csv"><code>label,fn,version,hash
raw-data,dataset.csv,v0.0.1,abc123def456
cache,processed.rds,v0.0.1,789012ghi345
output,figure1.png,v0.0.1,jkl678mno901
docs,index.html,v0.0.1,pqr234stu567</code></pre>
</div>
<div class="section level4">
<h4 id="querying-changes">Querying Changes<a class="anchor" aria-label="anchor" href="#querying-changes"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># What changed between versions?</span></span>
<span><span class="va">changes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_changes</a></span><span class="op">(</span><span class="st">"0.0.1"</span>, <span class="st">"0.0.2"</span><span class="op">)</span></span>
<span><span class="va">changes</span><span class="op">$</span><span class="va">added</span>      <span class="co"># New files</span></span>
<span><span class="va">changes</span><span class="op">$</span><span class="va">removed</span>    <span class="co"># Deleted files</span></span>
<span><span class="va">changes</span><span class="op">$</span><span class="va">modified</span>   <span class="co"># Changed files</span></span>
<span></span>
<span><span class="co"># What changed across multiple versions?</span></span>
<span><span class="va">range_changes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_range</a></span><span class="op">(</span><span class="st">"0.0.1"</span>, <span class="st">"0.0.5"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># What changed in the last build?</span></span>
<span><span class="va">last</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_last_change</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="benefits">Benefits<a class="anchor" aria-label="anchor" href="#benefits"></a>
</h4>
<ol style="list-style-type: decimal">
<li>
<strong>Reproducibility</strong> - Know exactly what changed between
versions</li>
<li>
<strong>Efficiency</strong> - Only upload changed files to
remotes</li>
<li>
<strong>Transparency</strong> - Clear audit trail of all
changes</li>
<li>
<strong>Restoration</strong> - Can identify files to restore from
archives</li>
</ol>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="build-hooks-system">Build Hooks System<a class="anchor" aria-label="anchor" href="#build-hooks-system"></a>
</h3>
<p>Hooks allow you to run custom scripts at specific points in the build
process.</p>
<div class="section level4">
<h4 id="hook-stages">Hook Stages<a class="anchor" aria-label="anchor" href="#hook-stages"></a>
</h4>
<p><strong>Pre-build hooks</strong> - Run after validation but before
document rendering: - Setup tasks - Data preparation - Environment
configuration</p>
<p><strong>Post-build hooks</strong> - Run after distribution but before
final push: - Notifications - Cleanup - Post-processing</p>
<p><strong>Both-stage hooks</strong> - Run in both pre and post stages:
- Logging - Time tracking - Common setup/teardown</p>
</div>
<div class="section level4">
<h4 id="configuration-patterns">Configuration Patterns<a class="anchor" aria-label="anchor" href="#configuration-patterns"></a>
</h4>
<p><strong>Production builds</strong> - Use
<code>build.hooks</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="at">    </span><span class="fu">pre</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> setup-data.R</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> validate-inputs.R</span></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="at">    </span><span class="fu">post</span><span class="kw">:</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> send-notification.R</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> cleanup-temp.R</span></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a><span class="at">    </span><span class="fu">both</span><span class="kw">:</span></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> log-timestamp.R</span></span></code></pre></div>
<p><strong>Development builds</strong> - Use <code>dev.hooks</code>
(exclusive):</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">dev</span><span class="kw">:</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="at">    </span><span class="fu">pre</span><span class="kw">:</span><span class="at"> quick-setup.R</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="at">    </span><span class="fu">both</span><span class="kw">:</span><span class="at"> dev-logger.R</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="hook-execution">Hook Execution<a class="anchor" aria-label="anchor" href="#hook-execution"></a>
</h4>
<ul>
<li>Hooks execute via <code><a href="https://rdrr.io/r/base/source.html" class="external-link">source()</a></code> in the project
environment</li>
<li>All hooks must exist or build will fail (validated in
pre-build)</li>
<li>Hooks have access to all project functions and environment</li>
<li>Execution order: stage-specific hooks first, then “both” hooks</li>
</ul>
</div>
<div class="section level4">
<h4 id="best-practices">Best Practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h4>
<ol style="list-style-type: decimal">
<li>
<strong>Keep hooks focused</strong> - Each hook should do one
thing</li>
<li>
<strong>Handle errors</strong> - Use <code><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch()</a></code> for
non-critical hooks</li>
<li>
<strong>Log activity</strong> - Help debug issues by logging hook
execution</li>
<li>
<strong>Test independently</strong> - Ensure hooks work
standalone</li>
<li>
<strong>Document purpose</strong> - Add comments explaining what
each hook does</li>
</ol>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="logging-and-debugging">Logging and Debugging<a class="anchor" aria-label="anchor" href="#logging-and-debugging"></a>
</h3>
<p>projr provides comprehensive logging to help understand and debug
builds.</p>
<div class="section level4">
<h4 id="output-levels">Output Levels<a class="anchor" aria-label="anchor" href="#output-levels"></a>
</h4>
<p>Control console verbosity via <code>PROJR_OUTPUT_LEVEL</code>
environment variable:</p>
<p><strong><code>"none"</code></strong> - No additional messages
(default for dev builds):</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Only errors are shown</span></span></code></pre></div>
<p><strong><code>"std"</code></strong> - Standard progress messages
(default for production builds):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># Shows major steps</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>✔ Pre<span class="sc">-</span>build preparation completed</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>✔ Document rendering completed</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>✔ Post<span class="sc">-</span>build completed successfully</span></code></pre></div>
<p><strong><code>"debug"</code></strong> - Verbose debugging
information:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># Shows detailed operations</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>→ Checking required packages</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>→ Snapshotting renv</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>→ Setting build version</span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>→ Running build hook<span class="sc">:</span> setup.R</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>→ Remote<span class="sc">:</span> github<span class="sc">/</span><span class="fu">archive</span> (<span class="dv">12</span> files)</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="log-files">Log Files<a class="anchor" aria-label="anchor" href="#log-files"></a>
</h4>
<p>Detailed logs are written to the cache directory:</p>
<pre><code>cache/projr/log/
├── output/                    # Production build logs
│   ├── history/builds.md      # All build records
│   └── output/2024-Jan-15/
│       └── 14-30-45.qmd       # Detailed log
└── dev/                       # Development build logs
    └── ...</code></pre>
</div>
<div class="section level4">
<h4 id="log-file-control">Log File Control<a class="anchor" aria-label="anchor" href="#log-file-control"></a>
</h4>
<p><strong><code>PROJR_LOG_DETAILED</code></strong> - Control detailed
log file creation:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create detailed logs (default)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_LOG_DETAILED <span class="op">=</span> <span class="st">"TRUE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Skip detailed logs (history still maintained)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_LOG_DETAILED <span class="op">=</span> <span class="st">"FALSE"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="build-history">Build History<a class="anchor" aria-label="anchor" href="#build-history"></a>
</h4>
<p>The <code>builds.md</code> file maintains a record of all builds:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu"># Build History</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">## 2024-01-15 14:30:45 - v0.0.2 (SUCCESS)</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>Build message here</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>Duration: 45.2 seconds</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="fu">## 2024-01-14 09:15:30 - v0.0.1 (SUCCESS)</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a>Initial release</span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a>Duration: 52.1 seconds</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="debug-workflow">Debug Workflow<a class="anchor" aria-label="anchor" href="#debug-workflow"></a>
</h4>
<p><strong>When a build fails:</strong></p>
<ol style="list-style-type: decimal">
<li><p><strong>Check the error message</strong> - Often points to the
exact issue</p></li>
<li>
<p><strong>Enable debug output</strong>:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_OUTPUT_LEVEL <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
<li><p><strong>Review the log file</strong> - Check detailed log in
cache</p></li>
<li>
<p><strong>Check Git status</strong>:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># What changed?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="st">"git status"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="st">"git diff"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Verify packages</strong>:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_build_check_packages.html">projr_build_check_packages</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="configuration-options">Configuration Options<a class="anchor" aria-label="anchor" href="#configuration-options"></a>
</h3>
<div class="section level4">
<h4 id="environment-variables">Environment Variables<a class="anchor" aria-label="anchor" href="#environment-variables"></a>
</h4>
<p><strong>Build behavior:</strong></p>
<ul>
<li>
<code>PROJR_OUTPUT_LEVEL</code> - Console verbosity:
<code>"none"</code>, <code>"std"</code>, <code>"debug"</code>
</li>
<li>
<code>PROJR_CLEAR_OUTPUT</code> - When to clear: <code>"pre"</code>,
<code>"post"</code>, <code>"never"</code>
</li>
<li>
<code>PROJR_LOG_DETAILED</code> - Detailed logs:
<code>"TRUE"</code>, <code>"FALSE"</code>
</li>
</ul>
<p><strong>Authentication:</strong></p>
<ul>
<li>
<code>GITHUB_PAT</code> - GitHub Personal Access Token</li>
<li>
<code>OSF_PAT</code> - Open Science Framework token</li>
</ul>
<p><strong>Testing:</strong></p>
<ul>
<li>
<code>R_PKG_TEST_LITE</code> - Enable LITE test mode</li>
<li>
<code>R_PKG_TEST_CRAN</code> - Enable CRAN test mode</li>
</ul>
</div>
<div class="section level4">
<h4 id="yaml-configuration">YAML Configuration<a class="anchor" aria-label="anchor" href="#yaml-configuration"></a>
</h4>
<p><strong>Git settings:</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="at">  </span><span class="fu">git</span><span class="kw">:</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="at">    </span><span class="fu">commit</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co">           # Auto-commit during build</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="at">    </span><span class="fu">push</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co">             # Auto-push after build</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="at">    </span><span class="fu">add-untracked</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co">    # Include untracked files</span></span></code></pre></div>
<p><strong>Build scripts:</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="at">  </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> analysis.qmd</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> report.Rmd</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a><span class="fu">dev</span><span class="kw">:</span></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="at">  </span><span class="fu">scripts</span><span class="kw">:</span></span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> quick-test.qmd</span></span></code></pre></div>
<p><strong>Build hooks:</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="at">  </span><span class="fu">hooks</span><span class="kw">:</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="at">    </span><span class="fu">pre</span><span class="kw">:</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> setup.R</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="at">    </span><span class="fu">post</span><span class="kw">:</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> cleanup.R</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="at">    </span><span class="fu">both</span><span class="kw">:</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> logger.R</span></span></code></pre></div>
<p><strong>Remote destinations:</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a><span class="at">    </span><span class="fu">release</span><span class="kw">:</span><span class="at"> </span><span class="st">"archive"</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a><span class="at">    </span><span class="fu">structure</span><span class="kw">:</span><span class="at"> </span><span class="st">"archive"</span><span class="co">      # or "latest"</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a><span class="at">    </span><span class="fu">send_cue</span><span class="kw">:</span><span class="at"> </span><span class="st">"if-change"</span><span class="co">     # or "always", "never"</span></span>
<span id="cb34-6"><a href="#cb34-6" tabindex="-1"></a><span class="at">    </span><span class="fu">send_strategy</span><span class="kw">:</span><span class="at"> </span><span class="st">"sync-diff"</span><span class="co"> # or "sync-purge", "upload-all", "upload-missing"</span></span>
<span id="cb34-7"><a href="#cb34-7" tabindex="-1"></a><span class="at">    </span><span class="fu">send_inspect</span><span class="kw">:</span><span class="at"> </span><span class="st">"manifest"</span><span class="co">  # or "file", "none"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="function-parameters">Function Parameters<a class="anchor" aria-label="anchor" href="#function-parameters"></a>
</h4>
<p><strong>Build functions:</strong></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Build message"</span>,              <span class="co"># Git commit message</span></span>
<span>  args_engine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,               <span class="co"># Arguments for rendering engine</span></span>
<span>  profile <span class="op">=</span> <span class="cn">NULL</span>,                     <span class="co"># projr profile to use</span></span>
<span>  archive_github <span class="op">=</span> <span class="cn">FALSE</span>,             <span class="co"># Quick GitHub archiving</span></span>
<span>  archive_local <span class="op">=</span> <span class="cn">FALSE</span>,              <span class="co"># Quick local archiving</span></span>
<span>  always_archive <span class="op">=</span> <span class="cn">TRUE</span>,              <span class="co"># Archive even if no changes</span></span>
<span>  clear_output <span class="op">=</span> <span class="st">"pre"</span>,               <span class="co"># When to clear directories</span></span>
<span>  output_level <span class="op">=</span> <span class="st">"std"</span>                <span class="co"># Console verbosity</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="cn">NULL</span>,                        <span class="co"># Specific file to build</span></span>
<span>  bump <span class="op">=</span> <span class="cn">FALSE</span>,                       <span class="co"># Whether to bump dev version</span></span>
<span>  old_dev_remove <span class="op">=</span> <span class="cn">TRUE</span>,              <span class="co"># Remove old dev versions</span></span>
<span>  args_engine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  profile <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  clear_output <span class="op">=</span> <span class="st">"never"</span>,             <span class="co"># Default for dev builds</span></span>
<span>  output_level <span class="op">=</span> <span class="st">"none"</span>               <span class="co"># Default for dev builds</span></span>
<span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="common-patterns-and-examples">Common Patterns and Examples<a class="anchor" aria-label="anchor" href="#common-patterns-and-examples"></a>
</h3>
<div class="section level4">
<h4 id="basic-production-build">Basic Production Build<a class="anchor" aria-label="anchor" href="#basic-production-build"></a>
</h4>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://satvilab.github.io/projr/">projr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build with patch version increment</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span>msg <span class="op">=</span> <span class="st">"Fix analysis bug"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build with minor version increment</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_minor</a></span><span class="op">(</span>msg <span class="op">=</span> <span class="st">"Add new analysis section"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build with major version increment</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_major</a></span><span class="op">(</span>msg <span class="op">=</span> <span class="st">"Complete rewrite"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="development-build">Development Build<a class="anchor" aria-label="anchor" href="#development-build"></a>
</h4>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Quick dev build</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build specific file</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"analysis.qmd"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dev build with debug output</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_OUTPUT_LEVEL <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="build-with-custom-options">Build with Custom Options<a class="anchor" aria-label="anchor" href="#build-with-custom-options"></a>
</h4>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Build with custom engine arguments</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Update analysis"</span>,</span>
<span>  args_engine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    clean <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build with different output level</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Release"</span>,</span>
<span>  output_level <span class="op">=</span> <span class="st">"debug"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build without clearing output</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Incremental update"</span>,</span>
<span>  clear_output <span class="op">=</span> <span class="st">"never"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="build-with-archiving">Build with Archiving<a class="anchor" aria-label="anchor" href="#build-with-archiving"></a>
</h4>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Archive to GitHub release</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Release v0.0.2"</span>,</span>
<span>  archive_github <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Archive specific directories</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Archive outputs only"</span>,</span>
<span>  archive_github <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"output"</span>, <span class="st">"docs"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Archive locally</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Create local backup"</span>,</span>
<span>  archive_local <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="build-with-profiles">Build with Profiles<a class="anchor" aria-label="anchor" href="#build-with-profiles"></a>
</h4>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use production profile</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Production release"</span>,</span>
<span>  profile <span class="op">=</span> <span class="st">"production"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use testing profile</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span></span>
<span>  msg <span class="op">=</span> <span class="st">"Test build"</span>,</span>
<span>  profile <span class="op">=</span> <span class="st">"testing"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h3>
<div class="section level4">
<h4 id="build-fails-with-package-error">Build Fails with Package Error<a class="anchor" aria-label="anchor" href="#build-fails-with-package-error"></a>
</h4>
<p><strong>Problem:</strong> Required packages not available</p>
<p><strong>Solution:</strong></p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check package requirements</span></span>
<span><span class="va">pkg_status</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projr_build_check_packages.html">projr_build_check_packages</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># See what's needed</span></span>
<span><span class="va">pkg_status</span><span class="op">$</span><span class="va">missing_pkgs</span></span>
<span></span>
<span><span class="co"># Get installation commands</span></span>
<span><span class="va">pkg_status</span><span class="op">$</span><span class="va">install_cmds</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="build-fails-with-git-error">Build Fails with Git Error<a class="anchor" aria-label="anchor" href="#build-fails-with-git-error"></a>
</h4>
<p><strong>Problem:</strong> Git repository not initialized</p>
<p><strong>Solution:</strong></p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Initialize Git</span></span>
<span><span class="fu"><a href="../reference/projr_init.html">projr_init_git</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or disable Git handling</span></span>
<span><span class="fu"><a href="../reference/yml-git.html">projr_yml_git_set</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="build-fails-with-authentication-error">Build Fails with Authentication Error<a class="anchor" aria-label="anchor" href="#build-fails-with-authentication-error"></a>
</h4>
<p><strong>Problem:</strong> GitHub or OSF authentication missing</p>
<p><strong>Solution:</strong></p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See GitHub auth instructions</span></span>
<span><span class="fu"><a href="../reference/instr_auth.html">projr_instr_auth_github</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># See OSF auth instructions</span></span>
<span><span class="fu"><a href="../reference/instr_auth.html">projr_instr_auth_osf</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set tokens</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GITHUB_PAT <span class="op">=</span> <span class="st">"your_token_here"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>OSF_PAT <span class="op">=</span> <span class="st">"your_token_here"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="build-succeeds-but-files-not-where-expected">Build Succeeds but Files Not Where Expected<a class="anchor" aria-label="anchor" href="#build-succeeds-but-files-not-where-expected"></a>
</h4>
<p><strong>Problem:</strong> Safe vs unsafe directory confusion</p>
<p><strong>Solution:</strong></p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get safe directory (in cache)</span></span>
<span><span class="fu"><a href="../reference/projr_path_get_dir.html">projr_path_get_dir</a></span><span class="op">(</span><span class="st">"output"</span>, safe <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get unsafe directory (final location)</span></span>
<span><span class="fu"><a href="../reference/projr_path_get_dir.html">projr_path_get_dir</a></span><span class="op">(</span><span class="st">"output"</span>, safe <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check clear_output setting</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"PROJR_CLEAR_OUTPUT"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="want-to-see-what-changed">Want to See What Changed<a class="anchor" aria-label="anchor" href="#want-to-see-what-changed"></a>
</h4>
<p><strong>Problem:</strong> Need to understand what files changed in
last build</p>
<p><strong>Solution:</strong></p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check last changes</span></span>
<span><span class="va">changes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_last_change</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">changes</span><span class="op">$</span><span class="va">added</span></span>
<span><span class="va">changes</span><span class="op">$</span><span class="va">modified</span></span>
<span><span class="va">changes</span><span class="op">$</span><span class="va">removed</span></span>
<span></span>
<span><span class="co"># Compare two specific versions</span></span>
<span><span class="fu"><a href="../reference/projr_manifest_query.html">projr_manifest_changes</a></span><span class="op">(</span><span class="st">"0.0.1"</span>, <span class="st">"0.0.2"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>The projr build process provides a comprehensive, automated workflow
for reproducible research:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Pre-Build</strong> validates, prepares, and versions your
project</li>
<li>
<strong>Build</strong> renders documents and executes scripts</li>
<li>
<strong>Post-Build</strong> finalizes, documents, and distributes
outputs</li>
</ol>
<p>Key features:</p>
<ul>
<li>
<strong>Automated versioning</strong> with manifest tracking</li>
<li>
<strong>Flexible hooks</strong> for customization</li>
<li>
<strong>Multiple remotes</strong> for distribution (GitHub, OSF,
local)</li>
<li>
<strong>Comprehensive logging</strong> for debugging</li>
<li>
<strong>Git integration</strong> for version control</li>
</ul>
<p>This architecture ensures that every build is: -
<strong>Reproducible</strong> - Full record of what changed -
<strong>Traceable</strong> - Complete audit trail via manifests and logs
- <strong>Reliable</strong> - Validation and error handling at each step
- <strong>Flexible</strong> - Configurable for different workflows</p>
<p>For more information:</p>
<ul>
<li>
<strong>How-to guides</strong> - Task-focused guides for common
workflows</li>
<li>
<strong>Concepts</strong> - Core concepts behind projr</li>
<li>
<strong>Environment</strong> - Environment variables reference</li>
<li>
<strong>Design</strong> - Architecture and design decisions</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miguel Rodo. Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> and R</p>
</div>

<div class="pkgdown-footer-right">
  <p><a href="LICENSE.html">License</a> • projr is free and open source software</p>
</div>

    </footer>
</div>





  </body>
</html>
