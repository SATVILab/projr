<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Environment Variables • projr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Environment Variables">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">projr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.3-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/get-started.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/how-to-guides.html">How-to guides</a></li>
    <li><a class="dropdown-item" href="../articles/environment.html">Environment Variables</a></li>
    <li><a class="dropdown-item" href="../articles/scripts-and-hooks.html">Scripts and Hooks</a></li>
    <li><a class="dropdown-item" href="../articles/concepts.html">Concepts</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Design</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
    <li><a class="dropdown-item" href="../BUILDLOG.html">Build log</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SATVILab/projr" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Environment Variables</h1>
            
      

      <div class="d-none name"><code>environment.Rmd</code></div>
    </div>

    
    
<p>Environment variables allow you to configure projr projects without
hardcoding values. This is especially useful for managing different
configurations across development, testing, and production environments,
as well as for securely storing authentication tokens.</p>
<p>This documentation is modeled after <a href="https://quarto.org/docs/projects/environment.html" class="external-link">Quarto’s
environment variables documentation</a>, adapted for projr’s specific
implementation.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>projr uses environment files to set default values for environment
variables. These files use a simple <code>KEY=VALUE</code> format and
are read in a specific order to allow for flexible configuration across
different contexts.</p>
<div class="section level3">
<h3 id="environment-file-types">Environment File Types<a class="anchor" aria-label="anchor" href="#environment-file-types"></a>
</h3>
<p>projr uses three types of environment files (in order of
precedence):</p>
<ol style="list-style-type: decimal">
<li>
<strong><code>_environment.local</code></strong> - Machine-specific
overrides (automatically git-ignored)</li>
<li>
<strong><code>_environment-&lt;profile&gt;</code></strong> -
Profile-specific configurations</li>
<li>
<strong><code>_environment</code></strong> - Global defaults</li>
</ol>
<p><strong>Important</strong>: Variables defined in files are only set
if not already defined in your system environment. This means:</p>
<ul>
<li>System-level environment variables always take precedence</li>
<li>Already-set session variables are never overridden by file
values</li>
<li>Files with higher precedence override files with lower
precedence</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="defining-environment-variables">Defining Environment Variables<a class="anchor" aria-label="anchor" href="#defining-environment-variables"></a>
</h2>
<div class="section level3">
<h3 id="file-format">File Format<a class="anchor" aria-label="anchor" href="#file-format"></a>
</h3>
<p>Environment files use a simple format with one variable per line:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="va">VARIABLE_NAME</span><span class="op">=</span>value</span></code></pre></div>
<p><strong>Variable name requirements</strong>:</p>
<ul>
<li>Must start with a letter (a-z, A-Z)</li>
<li>Can contain letters, numbers, and underscores</li>
<li>Pattern: <code>[a-zA-Z][a-zA-Z0-9_]*</code>
</li>
</ul>
<p><strong>Value handling</strong>:</p>
<ul>
<li>Values are taken as-is after the <code>=</code> sign (with
leading/trailing whitespace trimmed)</li>
<li>Special characters in values are preserved (spaces, URLs, paths,
etc.)</li>
<li>
<strong>No quotes needed</strong> - quotes become part of the
value</li>
<li>Empty values (<code>VAR=</code>) are silently ignored</li>
</ul>
<p><strong>Comments</strong>:</p>
<ul>
<li>Lines starting with <code>#</code> are ignored</li>
<li>Inline comments after <code>#</code> are also ignored</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Build configuration (this is a comment)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="va">PROJR_OUTPUT_LEVEL</span><span class="op">=</span>std</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="va">PROJR_LOG_DETAILED</span><span class="op">=</span>TRUE  <span class="co"># Enable detailed logging (inline comment)</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># URLs and paths work without quotes</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="va">API_URL</span><span class="op">=</span>https://api.example.com<span class="pp">?</span>param=value</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="va">DATA_PATH</span><span class="op">=</span>/path/to/data</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co"># This line is ignored because the value is empty</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co"># EMPTY_VAR=</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co"># Authentication (move to _environment.local)</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co"># GITHUB_PAT=your_token_here</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-environment-files">Creating Environment Files<a class="anchor" aria-label="anchor" href="#creating-environment-files"></a>
</h3>
<p>You can create environment files manually or programmatically:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create files manually</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="st">"_environment"</span><span class="op">)</span>         <span class="co"># Global defaults</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="st">"_environment-dev"</span><span class="op">)</span>     <span class="co"># Development profile</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="st">"_environment.local"</span><span class="op">)</span>   <span class="co"># Machine-specific (git-ignored)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-configuration">Example Configuration<a class="anchor" aria-label="anchor" href="#example-configuration"></a>
</h3>
<p>Here’s a typical setup with different configurations for development
and production:</p>
<p><strong><code>_environment</code> (global defaults):</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Default build settings</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="va">PROJR_OUTPUT_LEVEL</span><span class="op">=</span>std</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="va">PROJR_LOG_DETAILED</span><span class="op">=</span>TRUE</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="va">PROJR_CLEAR_OUTPUT</span><span class="op">=</span>pre</span></code></pre></div>
<p><strong><code>_environment-dev</code> (development
overrides):</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># More verbose output for development</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="va">PROJR_OUTPUT_LEVEL</span><span class="op">=</span>debug</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="va">PROJR_CLEAR_OUTPUT</span><span class="op">=</span>never</span></code></pre></div>
<p><strong><code>_environment.local</code> (secrets - never commit to
git):</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Authentication tokens</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="va">GITHUB_PAT</span><span class="op">=</span>ghp_your_github_token_here</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="va">OSF_PAT</span><span class="op">=</span>your_osf_token_here</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="activating-environment-variables">Activating Environment Variables<a class="anchor" aria-label="anchor" href="#activating-environment-variables"></a>
</h2>
<div class="section level3">
<h3 id="loading-environment-files">Loading Environment Files<a class="anchor" aria-label="anchor" href="#loading-environment-files"></a>
</h3>
<p>Use <code><a href="../reference/projr_env_set.html">projr_env_set()</a></code> to load environment variables from
files:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load all environment files in the standard order</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load a specific file</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="st">"_environment.local"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load multiple specific files</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_environment"</span>, <span class="st">"_environment-dev"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The standard loading order when calling <code><a href="../reference/projr_env_set.html">projr_env_set()</a></code>
without arguments is:</p>
<ol style="list-style-type: decimal">
<li>
<strong><code>_environment.local</code></strong> (highest priority,
machine-specific)</li>
<li>
<strong><code>_environment-&lt;QUARTO_PROFILE&gt;</code></strong>
(if <code>QUARTO_PROFILE</code> environment variable is set)</li>
<li>
<strong><code>_environment-&lt;PROJR_PROFILE&gt;</code></strong> (if
<code>PROJR_PROFILE</code> environment variable is set)</li>
<li>
<strong><code>_environment</code></strong> (lowest priority, global
defaults)</li>
</ol>
<p><strong>Key behaviors</strong>:</p>
<ul>
<li>Files are processed in order, with earlier files taking
precedence</li>
<li>If a variable is already set in your environment, it is
<strong>never overridden</strong>
</li>
<li>Non-existent files are silently skipped</li>
<li>The <code>_environment.local</code> file is automatically added to
<code>.gitignore</code> when created</li>
</ul>
</div>
<div class="section level3">
<h3 id="using-profiles">Using Profiles<a class="anchor" aria-label="anchor" href="#using-profiles"></a>
</h3>
<p>Profiles allow you to maintain different configurations for different
scenarios. Both <code>PROJR_PROFILE</code> and
<code>QUARTO_PROFILE</code> are supported.</p>
<div class="section level4">
<h4 id="projr_profile">PROJR_PROFILE<a class="anchor" aria-label="anchor" href="#projr_profile"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set a single profile</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_PROFILE <span class="op">=</span> <span class="st">"dev"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Loads _environment-dev</span></span>
<span></span>
<span><span class="co"># Set multiple profiles (comma or semicolon separated)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_PROFILE <span class="op">=</span> <span class="st">"test,dev"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_PROFILE <span class="op">=</span> <span class="st">"test;dev"</span><span class="op">)</span>  <span class="co"># Equivalent</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Loads _environment-test, then _environment-dev</span></span></code></pre></div>
<p><strong>Profile format</strong>:</p>
<ul>
<li>Comma-separated: <code>"profile1,profile2,profile3"</code>
</li>
<li>Semicolon-separated: <code>"profile1;profile2;profile3"</code>
</li>
<li>Whitespace around profile names is automatically trimmed</li>
<li>Earlier profiles take precedence (e.g., in <code>"test,dev"</code>,
test overrides dev)</li>
</ul>
<p><strong>Special profile names</strong>:</p>
<ul>
<li>
<code>"default"</code> and <code>"local"</code> are filtered out
(handled separately)</li>
<li>Avoid using these as custom profile names</li>
</ul>
</div>
<div class="section level4">
<h4 id="quarto_profile">QUARTO_PROFILE<a class="anchor" aria-label="anchor" href="#quarto_profile"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Quarto profiles are also respected</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>QUARTO_PROFILE <span class="op">=</span> <span class="st">"production"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Loads _environment-production</span></span>
<span></span>
<span><span class="co"># Multiple Quarto profiles (comma-separated only)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>QUARTO_PROFILE <span class="op">=</span> <span class="st">"test,production"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Key differences from PROJR_PROFILE</strong>:</p>
<ul>
<li>Only supports comma separation (not semicolon)</li>
<li>Takes precedence over <code>PROJR_PROFILE</code> in the loading
order</li>
<li>When both are set, <code>QUARTO_PROFILE</code> files are loaded
before <code>PROJR_PROFILE</code> files</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="key-environment-variables">Key Environment Variables<a class="anchor" aria-label="anchor" href="#key-environment-variables"></a>
</h2>
<p>projr recognizes several environment variables that control build
behavior:</p>
<div class="section level3">
<h3 id="build-control-variables">Build Control Variables<a class="anchor" aria-label="anchor" href="#build-control-variables"></a>
</h3>
<p><strong><code>PROJR_OUTPUT_LEVEL</code></strong> - Controls console
output verbosity during builds</p>
<ul>
<li>
<strong>Values</strong>: <code>"none"</code>, <code>"std"</code>,
<code>"debug"</code>
</li>
<li>
<strong>Default</strong>: <code>"none"</code> for dev builds,
<code>"std"</code> for production builds</li>
<li>
<strong>Case-sensitive</strong> (must be lowercase)</li>
<li>
<strong>Behaviors</strong>:
<ul>
<li>
<code>"none"</code>: No additional console output</li>
<li>
<code>"std"</code>: Standard informational messages</li>
<li>
<code>"debug"</code>: Verbose output including debug messages and
remote operations details</li>
</ul>
</li>
<li>Can be overridden by explicit <code>output_level</code> parameter in
build functions</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_OUTPUT_LEVEL <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Shows detailed debug output</span></span></code></pre></div>
<p><strong><code>PROJR_LOG_DETAILED</code></strong> - Controls whether
detailed build logs are written to files</p>
<ul>
<li>
<strong>Values</strong>: TRUE/FALSE representations
(case-insensitive)
<ul>
<li>TRUE: <code>"TRUE"</code>, <code>"true"</code>, <code>"1"</code>,
<code>"YES"</code>, <code>"yes"</code>, <code>"Y"</code>,
<code>"y"</code>
</li>
<li>FALSE: <code>"FALSE"</code>, <code>"false"</code>, <code>"0"</code>,
<code>"NO"</code>, <code>"no"</code>, <code>"N"</code>,
<code>"n"</code>
</li>
</ul>
</li>
<li>
<strong>Default</strong>: <code>"TRUE"</code>
</li>
<li>
<strong>Behaviors</strong>:
<ul>
<li>When <code>TRUE</code>: Creates detailed <code>.qmd</code> log files
in <code>cache/projr/log/</code>
</li>
<li>When <code>FALSE</code>: Still maintains build history
(<code>builds.md</code>) but skips detailed logs</li>
<li>History tracking is always maintained regardless of this
setting</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_LOG_DETAILED <span class="op">=</span> <span class="st">"FALSE"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Skips detailed log files but maintains history</span></span></code></pre></div>
<p><strong><code>PROJR_CLEAR_OUTPUT</code></strong> - Controls when
output directories are cleared during builds</p>
<ul>
<li>
<strong>Values</strong>: <code>"pre"</code>, <code>"post"</code>,
<code>"never"</code>
</li>
<li>
<strong>Default</strong>: <code>"pre"</code>
</li>
<li>
<strong>Case-sensitive</strong> (must be lowercase)</li>
<li>
<strong>Behaviors</strong>:
<ul>
<li>
<code>"pre"</code>: Clear output before build starts</li>
<li>
<code>"post"</code>: Clear output after build completes</li>
<li>
<code>"never"</code>: Never automatically clear output</li>
</ul>
</li>
<li>Can be overridden by explicit <code>clear_output</code> parameter in
build functions</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_CLEAR_OUTPUT <span class="op">=</span> <span class="st">"never"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Never clears output automatically</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="profile-configuration">Profile Configuration<a class="anchor" aria-label="anchor" href="#profile-configuration"></a>
</h3>
<p><strong><code>PROJR_PROFILE</code></strong> - Specifies which
profile(s) to use</p>
<ul>
<li>
<strong>Format</strong>: Comma or semicolon-separated list of
profile names</li>
<li>
<strong>Default</strong>: None (uses <code>_projr.yml</code>
only)</li>
<li>
<strong>Example</strong>: <code>PROJR_PROFILE="test,dev"</code> or
<code>PROJR_PROFILE="test;dev"</code>
</li>
<li>
<strong>Behaviors</strong>:
<ul>
<li>Supports both comma (<code>,</code>) and semicolon (<code>;</code>)
separators</li>
<li>Whitespace around values is automatically trimmed</li>
<li>Earlier profiles take precedence over later ones</li>
<li>Special values <code>"default"</code> and <code>"local"</code> are
filtered out (handled separately)</li>
</ul>
</li>
</ul>
<p><strong><code>QUARTO_PROFILE</code></strong> - Quarto’s profile
specification</p>
<ul>
<li>
<strong>Format</strong>: Comma-separated list of profile names</li>
<li>
<strong>Default</strong>: None</li>
<li>
<strong>Behavior</strong>: Takes precedence over
<code>PROJR_PROFILE</code> for environment file loading</li>
<li>Only supports comma separation (not semicolon)</li>
</ul>
</div>
<div class="section level3">
<h3 id="authentication-variables">Authentication Variables<a class="anchor" aria-label="anchor" href="#authentication-variables"></a>
</h3>
<p><strong><code>GITHUB_PAT</code></strong> or
<strong><code>GITHUB_TOKEN</code></strong> - GitHub Personal Access
Token</p>
<ul>
<li>
<strong>Purpose</strong>: GitHub Personal Access Token for GitHub
API operations</li>
<li>
<strong>Default</strong>: None</li>
<li>
<strong>Behaviors</strong>:
<ul>
<li>
<code>GITHUB_PAT</code> is checked before
<code>GITHUB_TOKEN</code>
</li>
<li>Falls back to <code>gitcreds</code> package if neither is set</li>
<li>Required for creating GitHub repositories and releases</li>
<li>Should have appropriate scopes (repo, workflow, etc.)</li>
</ul>
</li>
<li>
<strong>Storage</strong>: Should always be stored in
<code>_environment.local</code> (never committed to git)</li>
</ul>
<p><strong><code>OSF_PAT</code></strong> - Open Science Framework
Personal Access Token</p>
<ul>
<li>
<strong>Purpose</strong>: Open Science Framework Personal Access
Token</li>
<li>
<strong>Default</strong>: None</li>
<li>
<strong>Behavior</strong>: Required for OSF remote destinations</li>
<li>
<strong>Storage</strong>: Should always be stored in
<code>_environment.local</code> (never committed to git)</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check authentication setup and get instructions</span></span>
<span><span class="fu"><a href="../reference/instr_auth.html">projr_instr_auth_github</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Get GitHub setup instructions</span></span>
<span><span class="fu"><a href="../reference/instr_auth.html">projr_instr_auth_osf</a></span><span class="op">(</span><span class="op">)</span>     <span class="co"># Get OSF setup instructions</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="variable-precedence">Variable Precedence<a class="anchor" aria-label="anchor" href="#variable-precedence"></a>
</h2>
<p>Environment variables follow a strict precedence order to allow for
flexible configuration:</p>
<div class="section level3">
<h3 id="system-vs-file-variables">System vs File Variables<a class="anchor" aria-label="anchor" href="#system-vs-file-variables"></a>
</h3>
<p><strong>Already-set variables are never overridden:</strong></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pre-set value is preserved</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>MY_VAR <span class="op">=</span> <span class="st">"original"</span><span class="op">)</span></span>
<span><span class="co"># _environment contains: MY_VAR=new</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MY_VAR"</span><span class="op">)</span>  <span class="co"># Still "original", not "new"</span></span></code></pre></div>
<p>This ensures that system-level or session-level variables always take
priority.</p>
</div>
<div class="section level3">
<h3 id="file-precedence">File Precedence<a class="anchor" aria-label="anchor" href="#file-precedence"></a>
</h3>
<p>When loading from files, precedence is (highest to lowest):</p>
<ol style="list-style-type: decimal">
<li>
<strong><code>_environment.local</code></strong> - Machine-specific
overrides</li>
<li>
<strong><code>_environment-&lt;QUARTO_PROFILE&gt;</code></strong> -
Quarto profile-specific</li>
<li>
<strong><code>_environment-&lt;PROJR_PROFILE&gt;</code></strong> -
projr profile-specific</li>
<li>
<strong><code>_environment</code></strong> - Global defaults</li>
</ol>
</div>
<div class="section level3">
<h3 id="function-parameters-vs-environment-variables">Function Parameters vs Environment Variables<a class="anchor" aria-label="anchor" href="#function-parameters-vs-environment-variables"></a>
</h3>
<p>Function parameters always override environment variables:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Environment variable is set</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_OUTPUT_LEVEL <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># But function parameter takes precedence</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span>output_level <span class="op">=</span> <span class="st">"std"</span><span class="op">)</span>  <span class="co"># Uses "std", not "debug"</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="required-variables">Required Variables<a class="anchor" aria-label="anchor" href="#required-variables"></a>
</h2>
<p>You can document and validate required environment variables by
creating an <code>_environment.required</code> file. This file lists
variable names (one per line) that must be set for builds to proceed
properly.</p>
<p><strong>Format:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># _environment.required</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="ex">GITHUB_PAT</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="ex">DATABASE_URL</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="ex">API_KEY</span></span></code></pre></div>
<p><strong>Behavior:</strong></p>
<ul>
<li>During builds, projr automatically checks that all listed variables
are set</li>
<li>If a required variable is missing, a <strong>warning</strong> is
issued (build continues)</li>
<li>Comments are supported (lines starting with <code>#</code>)</li>
<li>This file serves as both documentation and a validation
mechanism</li>
</ul>
<p><strong>Use cases:</strong></p>
<ul>
<li>Document mandatory configuration for team members</li>
<li>Ensure critical credentials are configured before deployment</li>
<li>Provide a template for local environment setup</li>
</ul>
<p><strong>Example workflow:</strong></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Create _environment.required with mandatory variables</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GITHUB_PAT"</span>, <span class="st">"API_KEY"</span><span class="op">)</span>, <span class="st">"_environment.required"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Create _environment.local with actual values (git-ignored)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GITHUB_PAT=ghp_..."</span>, <span class="st">"API_KEY=..."</span><span class="op">)</span>, <span class="st">"_environment.local"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 3. Build will check and warn if any required variables are missing</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="best-practices">Best Practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h2>
<div class="section level3">
<h3 id="security">Security<a class="anchor" aria-label="anchor" href="#security"></a>
</h3>
<p><strong>Never commit secrets to version control:</strong></p>
<ul>
<li>Always use <code>_environment.local</code> for tokens, passwords,
and API keys</li>
<li>This file is automatically added to <code>.gitignore</code> by
projr</li>
<li>Never commit <code>GITHUB_PAT</code>, <code>OSF_PAT</code>, or
similar sensitive values</li>
</ul>
<p><strong>Example safe setup:</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># In _environment (committed to git)</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>API_BASE_URL<span class="ot">=</span>https<span class="sc">:</span><span class="er">//</span>api.example.com</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co"># In _environment.local (git-ignored)</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>API_KEY<span class="ot">=</span>your_secret_key_here</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="organization">Organization<a class="anchor" aria-label="anchor" href="#organization"></a>
</h3>
<p><strong>Use profiles for different environments:</strong></p>
<ul>
<li>
<code>_environment-dev</code> - Development settings (verbose
output, debug mode)</li>
<li>
<code>_environment-test</code> - Testing settings (moderate
output)</li>
<li>
<code>_environment-prod</code> - Production settings (minimal
output)</li>
</ul>
<p><strong>Keep global defaults minimal:</strong></p>
<ul>
<li>Use <code>_environment</code> only for settings that apply across
all contexts</li>
<li>Put environment-specific settings in profile files</li>
<li>Use <code>_environment.local</code> for machine-specific
overrides</li>
</ul>
</div>
<div class="section level3">
<h3 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a>
</h3>
<p><strong>Document requirements:</strong></p>
<ul>
<li>List required variables in <code>_environment.required</code>
</li>
<li>Provide example values in <code>_environment</code> (commented out
for secrets)</li>
<li>Include setup instructions in your project README</li>
</ul>
<p><strong>Test your configuration:</strong></p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Verify variables are set correctly</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"PROJR_OUTPUT_LEVEL"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GITHUB_PAT"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test with different profiles</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_PROFILE <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="common-pitfalls">Common Pitfalls<a class="anchor" aria-label="anchor" href="#common-pitfalls"></a>
</h2>
<div class="section level3">
<h3 id="case-sensitivity">Case Sensitivity<a class="anchor" aria-label="anchor" href="#case-sensitivity"></a>
</h3>
<p>Most environment variables are <strong>case-sensitive</strong> (both
names and values):</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Correct - lowercase values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_OUTPUT_LEVEL <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_CLEAR_OUTPUT <span class="op">=</span> <span class="st">"never"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Incorrect - uppercase values won't work</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_OUTPUT_LEVEL <span class="op">=</span> <span class="st">"DEBUG"</span><span class="op">)</span>    <span class="co"># Won't work</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_CLEAR_OUTPUT <span class="op">=</span> <span class="st">"NEVER"</span><span class="op">)</span>    <span class="co"># Won't work</span></span></code></pre></div>
<p><strong>Exception:</strong> Boolean values in
<code>PROJR_LOG_DETAILED</code> are case-insensitive:</p>
<ul>
<li>
<code>"TRUE"</code>, <code>"true"</code>, <code>"True"</code>,
<code>"1"</code>, <code>"YES"</code>, <code>"yes"</code>,
<code>"Y"</code>, <code>"y"</code> all work</li>
<li>
<code>"FALSE"</code>, <code>"false"</code>, <code>"False"</code>,
<code>"0"</code>, <code>"NO"</code>, <code>"no"</code>,
<code>"N"</code>, <code>"n"</code> all work</li>
</ul>
</div>
<div class="section level3">
<h3 id="variable-name-format">Variable Name Format<a class="anchor" aria-label="anchor" href="#variable-name-format"></a>
</h3>
<p>Variable names must follow a specific pattern or they’ll be silently
ignored:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># Correct - starts with letter, contains only letters, numbers, underscores</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="va">MY_VAR</span><span class="op">=</span>value</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="va">MY_VAR_2</span><span class="op">=</span>value</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="va">MyVar</span><span class="op">=</span>value</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co"># Incorrect - will be ignored</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="ex">123_VAR=value</span>    <span class="co"># Starts with number</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="ex">MY-VAR=value</span>     <span class="co"># Contains hyphen</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="ex">MY.VAR=value</span>     <span class="co"># Contains dot</span></span></code></pre></div>
<p>The pattern enforced is: <code>^[a-zA-Z][a-zA-Z0-9_]*=</code></p>
</div>
<div class="section level3">
<h3 id="empty-values">Empty Values<a class="anchor" aria-label="anchor" href="#empty-values"></a>
</h3>
<p>Empty values in environment files are <strong>silently
ignored</strong>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># This does NOT set VAR to an empty string - the line is skipped</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="va">VAR</span><span class="op">=</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co"># This sets VAR to empty string, but with quotes as part of the value</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="va">VAR</span><span class="op">=</span><span class="st">""</span>    <span class="co"># Literally sets to two double-quote characters</span></span></code></pre></div>
<p>If a variable name or value is empty (after trimming whitespace), the
entire line is skipped.</p>
</div>
<div class="section level3">
<h3 id="profile-names">Profile Names<a class="anchor" aria-label="anchor" href="#profile-names"></a>
</h3>
<p>Avoid using <code>"default"</code> or <code>"local"</code> as profile
names: - These special values are filtered out automatically by projr -
Using them won’t cause errors, but they’ll be ignored</p>
</div>
<div class="section level3">
<h3 id="file-format-details">File Format Details<a class="anchor" aria-label="anchor" href="#file-format-details"></a>
</h3>
<p>Environment files have specific formatting requirements:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># Correct - standard format</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="va">KEY</span><span class="op">=</span>value</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co"># Incorrect - spaces around = are not supported</span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="ex">KEY</span> = value        <span class="co"># Won't parse correctly</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="co"># Warning - quotes are included in the value</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="va">KEY</span><span class="op">=</span><span class="st">"value"</span>        <span class="co"># Sets KEY to literally "value" (including the quotes)</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="va">KEY</span><span class="op">=</span><span class="st">'value'</span>        <span class="co"># Sets KEY to literally 'value' (including the quotes)</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="co"># Correct - values with spaces (no quotes needed)</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="va">PATH</span><span class="op">=</span>/path/to/my <span class="ex">file.txt</span>       <span class="co"># Works correctly</span></span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a><span class="va">URL</span><span class="op">=</span>https://example.com<span class="pp">?</span>a=b<span class="kw">&amp;</span><span class="va">c</span><span class="op">=</span>d <span class="co"># Works correctly</span></span></code></pre></div>
<p><strong>Remember:</strong> Values are taken as-is after the
<code>=</code> sign (with leading/trailing whitespace trimmed). Special
characters, spaces, and symbols are preserved without needing
quotes.</p>
</div>
<div class="section level3">
<h3 id="already-set-variables">Already-Set Variables<a class="anchor" aria-label="anchor" href="#already-set-variables"></a>
</h3>
<p>Variables that are already set in your environment are <strong>never
overridden</strong> by files:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set in environment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>MY_VAR <span class="op">=</span> <span class="st">"original"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># File contains: MY_VAR=new</span></span>
<span><span class="fu"><a href="../reference/projr_env_set.html">projr_env_set</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Original value is preserved</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MY_VAR"</span><span class="op">)</span>  <span class="co"># Still "original", not "new"</span></span></code></pre></div>
<p>This is by design - it allows system-level configuration to always
take precedence.</p>
</div>
</div>
<div class="section level2">
<h2 id="see-also">See Also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<ul>
<li>
<code><a href="../reference/projr_env_set.html">?projr_env_set</a></code> - Load environment variables from
files</li>
<li>
<code><a href="../reference/projr_build_dev.html">?projr_build_dev</a></code> - Development builds (respects
environment variables)</li>
<li>
<code><a href="../reference/projr_build.html">?projr_build</a></code> - Production builds (respects environment
variables)</li>
<li>
<code><a href="../reference/projr_profile_create.html">?projr_profile_create</a></code> - Create new profiles</li>
<li>
<a href="https://quarto.org/docs/projects/environment.html" class="external-link">Quarto
Environment Variables</a> - Quarto’s environment variable
documentation</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miguel Rodo. Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> and R</p>
</div>

<div class="pkgdown-footer-right">
  <p><a href="LICENSE.html">License</a> • projr is free and open source software</p>
</div>

    </footer>
</div>





  </body>
</html>
