<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Restoring Artifacts • projr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Restoring Artifacts">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">projr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.3-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/get-started.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/how-to-guides.html">How-to guides</a></li>
    <li><a class="dropdown-item" href="../articles/build-process.html">Build Process</a></li>
    <li><a class="dropdown-item" href="../articles/send-to-remotes.html">Sending to Remotes</a></li>
    <li><a class="dropdown-item" href="../articles/restore-artifacts.html">Restoring Artifacts</a></li>
    <li><a class="dropdown-item" href="../articles/environment.html">Environment Variables</a></li>
    <li><a class="dropdown-item" href="../articles/scripts-and-hooks.html">Scripts and Hooks</a></li>
    <li><a class="dropdown-item" href="../articles/concepts.html">Concepts</a></li>
    <li><a class="dropdown-item" href="../articles/design.html">Design</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
    <li><a class="dropdown-item" href="../BUILDLOG.html">Build log</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SATVILab/projr" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Restoring Artifacts</h1>
            
      

      <div class="d-none name"><code>restore-artifacts.Rmd</code></div>
    </div>

    
    
<p>Artifact restoration allows you to download versioned project
components from remote sources. This is useful for setting up projects
on new machines, sharing reproducible research with collaborators, and
recovering data from archived versions.</p>
<p>This documentation covers the three restoration workflows and their
configuration options.</p>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>projr provides functions to restore project artifacts (raw data,
outputs, documents) from remote sources. These functions download
versioned files that were previously archived during builds.</p>
<div class="section level3">
<h3 id="what-are-artifacts">What Are Artifacts?<a class="anchor" aria-label="anchor" href="#what-are-artifacts"></a>
</h3>
<p>In projr, <strong>artifacts</strong> are the versioned components of
your project:</p>
<ul>
<li>
<strong>raw-data</strong> - Source data files</li>
<li>
<strong>cache</strong> - Intermediate computation results<br>
</li>
<li>
<strong>output</strong> - Final analysis outputs (figures,
tables)</li>
<li>
<strong>docs</strong> - Rendered documents (HTML, PDF)</li>
<li>
<strong>code</strong> - All Git-tracked source files</li>
</ul>
<p>These artifacts are archived to remote destinations during production
builds and can be restored later.</p>
</div>
<div class="section level3">
<h3 id="when-to-restore">When to Restore<a class="anchor" aria-label="anchor" href="#when-to-restore"></a>
</h3>
<p>Common scenarios for restoration:</p>
<ul>
<li>
<strong>New machine setup</strong> - Clone repository and restore
data to start working</li>
<li>
<strong>Collaboration</strong> - Team member needs project data to
reproduce analysis</li>
<li>
<strong>Disaster recovery</strong> - Lost local files need to be
recovered from archives</li>
<li>
<strong>Reproducibility</strong> - Restore inputs that created
published outputs (always gets latest remote version)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="restoration-functions">Restoration Functions<a class="anchor" aria-label="anchor" href="#restoration-functions"></a>
</h2>
<p>projr provides three restoration functions for different
workflows:</p>
<ol style="list-style-type: decimal">
<li>
<strong><code><a href="../reference/projr_restore.html">projr_restore_repo()</a></code></strong> - Clone
repository and restore artifacts (most common)</li>
<li>
<strong><code><a href="../reference/projr_restore.html">projr_restore_repo_wd()</a></code></strong> - Restore into
current directory</li>
<li>
<strong><code><a href="../reference/projr_restore.html">projr_content_update()</a></code></strong> - Restore
artifacts in existing local project</li>
</ol>
<div class="section level3">
<h3 id="projr_restore_repo">projr_restore_repo()<a class="anchor" aria-label="anchor" href="#projr_restore_repo"></a>
</h3>
<p>Clone a GitHub repository and restore artifacts in one step.</p>
<p><strong>Syntax:</strong></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://satvilab.github.io/projr/">projr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span></span>
<span>  <span class="va">repo</span>,              <span class="co"># "owner/repo" or "repo"</span></span>
<span>  path <span class="op">=</span> <span class="cn">NULL</span>,       <span class="co"># Where to clone (default: creates subdirectory)</span></span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,      <span class="co"># Which artifacts (default: all raw artifacts)</span></span>
<span>  pos <span class="op">=</span> <span class="cn">NULL</span>,        <span class="co"># Source position (default: both "source" and "dest")</span></span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,       <span class="co"># Remote type (default: first available)</span></span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>       <span class="co"># Remote title (default: first available for type)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Basic usage:</strong></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Clone into subdirectory and restore all raw artifacts</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clone to specific location</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span>, path <span class="op">=</span> <span class="st">"~/projects/my-analysis"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clone into current directory (use with caution!)</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span>, path <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<p><strong>What it does:</strong></p>
<ol style="list-style-type: decimal">
<li>Clones repository into specified directory (or creates
subdirectory)</li>
<li>Reads <code>_projr.yml</code> to find configured remotes</li>
<li>Restores artifacts (default: all <code>raw-*</code> labels like
raw-data; cache is NOT included)</li>
<li>Returns <code>TRUE</code> if successful, <code>FALSE</code>
otherwise</li>
</ol>
</div>
<div class="section level3">
<h3 id="projr_restore_repo_wd">projr_restore_repo_wd()<a class="anchor" aria-label="anchor" href="#projr_restore_repo_wd"></a>
</h3>
<p>Clone directly into current working directory, then restore
artifacts.</p>
<p><strong>Syntax:</strong></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo_wd</a></span><span class="op">(</span></span>
<span>  <span class="va">repo</span>,              <span class="co"># "owner/repo" or "repo"</span></span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,      <span class="co"># Which artifacts</span></span>
<span>  pos <span class="op">=</span> <span class="cn">NULL</span>,        <span class="co"># Source position</span></span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,       <span class="co"># Remote type</span></span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>       <span class="co"># Remote title</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Usage:</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># From within target directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/projects/my-analysis"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo_wd</a></span><span class="op">(</span><span class="st">"owner/repo"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Warning:</strong> This creates files directly in your current
directory. Ensure you’re in the right location!</p>
</div>
<div class="section level3">
<h3 id="projr_content_update">projr_content_update()<a class="anchor" aria-label="anchor" href="#projr_content_update"></a>
</h3>
<p>Restore artifacts in an existing project without cloning.</p>
<p><strong>Syntax:</strong></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span></span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,      <span class="co"># Which artifacts (default: all raw artifacts)</span></span>
<span>  pos <span class="op">=</span> <span class="cn">NULL</span>,        <span class="co"># Source position (default: both)</span></span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,       <span class="co"># Remote type (default: first available)</span></span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>       <span class="co"># Remote title (default: first available for type)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Usage:</strong></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Navigate to project first</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"~/projects/my-analysis"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Restore all raw artifacts</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Restore specific artifacts</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"raw-data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"raw-data"</span>, <span class="st">"cache"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Requires:</strong> Project must have
<code>manifest.csv</code> file in root directory.</p>
</div>
</div>
<div class="section level2">
<h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h2>
<div class="section level3">
<h3 id="label-parameter">label Parameter<a class="anchor" aria-label="anchor" href="#label-parameter"></a>
</h3>
<p>Controls which artifacts are restored.</p>
<p><strong><code>label = NULL</code></strong> (default) - Restore all
raw-* artifacts</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Restores: raw-data and any other raw-* directories</span></span>
<span><span class="co"># Note: cache is NOT restored by default (not a raw-* label)</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To restore cache explicitly:</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"raw-data"</span>, <span class="st">"cache"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>label = "raw-data"</code></strong> - Restore specific
artifact</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"raw-data"</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>label = c("raw-data", "cache")</code></strong> -
Restore multiple artifacts</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"raw-data"</span>, <span class="st">"cache"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Valid labels:</strong></p>
<p>Any directory label defined in your <code>_projr.yml</code>:</p>
<ul>
<li>
<code>raw-data</code> - Source data files</li>
<li>
<code>cache</code> - Cached computation results</li>
<li>
<code>output</code> - Analysis outputs (use cautiously - usually
regenerated)</li>
<li>
<code>docs</code> - Rendered documents (use cautiously - usually
regenerated)</li>
</ul>
<p><strong>When to restore outputs/docs:</strong></p>
<ul>
<li>Comparing results across versions</li>
<li>When computation is expensive and results are archived</li>
<li>Generally, prefer regenerating outputs with
<code><a href="../reference/projr_build_dev.html">projr_build_dev()</a></code>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="type-parameter">type Parameter<a class="anchor" aria-label="anchor" href="#type-parameter"></a>
</h3>
<p>Specifies which remote type to use.</p>
<p><strong><code>type = NULL</code></strong> (default) - Use first
available remote</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Checks remotes in the order they appear in _projr.yml</span></span>
<span><span class="co"># (not a fixed order - depends on your configuration)</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>type = "github"</code></strong> - Use GitHub releases
only</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"github"</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>type = "local"</code></strong> - Use local directory
only</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>type = "osf"</code></strong> - Use OSF only</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"osf"</span><span class="op">)</span></span></code></pre></div>
<p><strong>When to specify:</strong></p>
<ul>
<li>Multiple remotes configured and you want a specific one</li>
<li>Testing specific remote sources</li>
<li>One remote is faster or more reliable</li>
</ul>
</div>
<div class="section level3">
<h3 id="title-parameter">title Parameter<a class="anchor" aria-label="anchor" href="#title-parameter"></a>
</h3>
<p>Selects a specific remote configuration when multiple exist.</p>
<p><strong><code>title = NULL</code></strong> (default) - Use first
available title for selected type</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>title = "network-backup"</code></strong> - Use specific
remote</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local"</span>, title <span class="op">=</span> <span class="st">"network-backup"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Example with multiple local remotes:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># _projr.yml</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="at">  </span><span class="fu">local</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="at">    </span><span class="fu">local-backup</span><span class="kw">:</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"local-backup"</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="at">      </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">"~/backup/raw-data"</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="at">    </span><span class="fu">network-backup</span><span class="kw">:</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"network-backup"</span></span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span></span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a><span class="at">      </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">"/mnt/shared/raw-data"</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Restore from local backup</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local"</span>, title <span class="op">=</span> <span class="st">"local-backup"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Restore from network backup</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local"</span>, title <span class="op">=</span> <span class="st">"network-backup"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="pos-parameter">pos Parameter<a class="anchor" aria-label="anchor" href="#pos-parameter"></a>
</h3>
<p>Controls whether to restore from source directories or build
destinations.</p>
<p><strong><code>pos = NULL</code></strong> (default) - Check both in
order</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Checks "source" first, then "dest"</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>pos = "source"</code></strong> - Source directories
only</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>pos <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>pos = "dest"</code></strong> - Build destinations
only</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>pos <span class="op">=</span> <span class="st">"dest"</span><span class="op">)</span></span></code></pre></div>
<p><strong><code>pos = c("source", "dest")</code></strong> - Both
(explicit)</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>pos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source"</span>, <span class="st">"dest"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>When to use:</strong></p>
<ul>
<li>Usually the default is appropriate</li>
<li>Use <code>pos = "dest"</code> if you specifically archived outputs
and want to restore them</li>
<li>Use <code>pos = "source"</code> if you only want original source
artifacts</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="authentication">Authentication<a class="anchor" aria-label="anchor" href="#authentication"></a>
</h2>
<div class="section level3">
<h3 id="github-authentication">GitHub Authentication<a class="anchor" aria-label="anchor" href="#github-authentication"></a>
</h3>
<p>Restoring from GitHub requires authentication.</p>
<p><strong>Required:</strong> GitHub Personal Access Token (PAT)</p>
<p><strong>Setup:</strong></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get detailed instructions</span></span>
<span><span class="fu"><a href="../reference/instr_auth.html">projr_instr_auth_github</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Set environment variable:</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># In _environment.local (never commit!)</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="va">GITHUB_PAT</span><span class="op">=</span>ghp_your_token_here</span></code></pre></div>
<p><strong>Verify:</strong></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check token is set</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"GITHUB_PAT"</span><span class="op">)</span>  <span class="co"># Should show your token</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="osf-authentication">OSF Authentication<a class="anchor" aria-label="anchor" href="#osf-authentication"></a>
</h3>
<p>Restoring from OSF requires authentication.</p>
<p><strong>Required:</strong> OSF Personal Access Token</p>
<p><strong>Setup:</strong></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get detailed instructions</span></span>
<span><span class="fu"><a href="../reference/instr_auth.html">projr_instr_auth_osf</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><strong>Set environment variable:</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># In _environment.local</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="va">OSF_PAT</span><span class="op">=</span>your_osf_token_here</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="local-directories">Local Directories<a class="anchor" aria-label="anchor" href="#local-directories"></a>
</h3>
<p>No authentication needed, but ensure:</p>
<ul>
<li>Directory paths are accessible</li>
<li>You have read permissions</li>
<li>Network drives are mounted (if applicable)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="complete-examples">Complete Examples<a class="anchor" aria-label="anchor" href="#complete-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1-new-collaborator-setup">Example 1: New Collaborator Setup<a class="anchor" aria-label="anchor" href="#example-1-new-collaborator-setup"></a>
</h3>
<p>Set up a project on a new machine:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 1: Clone and restore</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"satvilab/my-study"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 2: Navigate into project</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"my-study"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 3: Install R dependencies</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">restore</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 4: Run analysis</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Test build</span></span>
<span><span class="fu"><a href="../reference/projr_build.html">projr_build_patch</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># Production build when ready</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-2-selective-restoration">Example 2: Selective Restoration<a class="anchor" aria-label="anchor" href="#example-2-selective-restoration"></a>
</h3>
<p>Restore only specific artifacts, not all:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 1: Clone repository</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"repo"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 2: Restore only raw data (not cache or other artifacts)</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"raw-data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 3: Regenerate other artifacts by running analysis</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-3-selective-restoration">Example 3: Selective Restoration<a class="anchor" aria-label="anchor" href="#example-3-selective-restoration"></a>
</h3>
<p>Restore only raw data, not cached results:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Restore only raw data</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"raw-data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Regenerate cache by running analysis</span></span>
<span><span class="fu"><a href="../reference/projr_build_dev.html">projr_build_dev</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-4-fallback-to-different-remote">Example 4: Fallback to Different Remote<a class="anchor" aria-label="anchor" href="#example-4-fallback-to-different-remote"></a>
</h3>
<p>Try multiple remote sources:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Try GitHub first</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"github"</span><span class="op">)</span>,</span>
<span>  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fallback to local if GitHub fails</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">result</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-5-network-drive-restoration">Example 5: Network Drive Restoration<a class="anchor" aria-label="anchor" href="#example-5-network-drive-restoration"></a>
</h3>
<p>Restore from shared network drive:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># _projr.yml configuration</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="at">  </span><span class="fu">local</span><span class="kw">:</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="at">    </span><span class="fu">network-data</span><span class="kw">:</span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="at">      </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"network-data"</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span></span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a><span class="at">      </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">"/mnt/shared/project-data"</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Restore from network drive</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local"</span>, title <span class="op">=</span> <span class="st">"network-data"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="how-restoration-works">How Restoration Works<a class="anchor" aria-label="anchor" href="#how-restoration-works"></a>
</h2>
<div class="section level3">
<h3 id="the-manifest-system">The Manifest System<a class="anchor" aria-label="anchor" href="#the-manifest-system"></a>
</h3>
<p>projr uses <code>manifest.csv</code> to track file versions and
hashes.</p>
<p><strong>Manifest structure:</strong></p>
<pre><code>label      | fn                | version | hash
-----------|-------------------|---------|----------------------------------
raw-data   | data/survey.csv   | v0.1.0  | 5d41402abc4b2a76b9719d911017c592
raw-data   | data/survey.csv   | v0.2.0  | 5d41402abc4b2a76b9719d911017c592
output     | figures/plot.png  | v0.1.0  | 098f6bcd4621d373cade4e832627b4f6</code></pre>
<p><strong>How it’s used:</strong></p>
<ol style="list-style-type: decimal">
<li>projr reads <code>manifest.csv</code> from your project to identify
available artifacts</li>
<li>Determines which remote version to restore (latest for archive
remotes)</li>
<li>Downloads files from configured remotes</li>
</ol>
</div>
<div class="section level3">
<h3 id="version-resolution">Version Resolution<a class="anchor" aria-label="anchor" href="#version-resolution"></a>
</h3>
<p>projr determines which version to restore from remotes:</p>
<p><strong>For archive remotes</strong> (most common): Always restores
the latest available version from the remote, regardless of your current
Git checkout or project version.</p>
<p><strong>For latest remotes</strong>: Restores the current
snapshot.</p>
<p><strong>Example:</strong></p>
<pre><code>Remote has archived versions: v0.1.0, v0.2.0, v0.3.0
Your Git checkout: v0.1.0
Result: Still restores v0.3.0 (latest available on remote)</code></pre>
<p><strong>Note:</strong> <code><a href="../reference/projr_restore.html">projr_content_update()</a></code> always
fetches the newest remote version for archive remotes. To work with
older artifact versions, manually download them from the remote source
(e.g., GitHub Releases).</p>
</div>
<div class="section level3">
<h3 id="restoration-process">Restoration Process<a class="anchor" aria-label="anchor" href="#restoration-process"></a>
</h3>
<p>Step-by-step restoration:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Read configuration</strong> - Parse <code>_projr.yml</code>
to find remote sources</li>
<li>
<strong>Read manifest</strong> - Load <code>manifest.csv</code> to
identify available artifacts</li>
<li>
<strong>Select sources</strong> - Choose appropriate remotes for
each label</li>
<li>
<strong>Determine version</strong> - Identify which remote version
to restore (latest for archives)</li>
<li>
<strong>Download files</strong> - Retrieve files from remotes and
place in local directories</li>
</ol>
</div>
<div class="section level3">
<h3 id="remote-source-priority">Remote Source Priority<a class="anchor" aria-label="anchor" href="#remote-source-priority"></a>
</h3>
<p>projr checks remote sources in the order they appear in your
<code>_projr.yml</code> configuration. The order depends on how you’ve
configured your remotes and is not fixed.</p>
<p>When <code>type = NULL</code> (default), projr:</p>
<ol style="list-style-type: decimal">
<li>Looks for sources or destinations in the order listed under
<code>build:</code> in <code>_projr.yml</code>
</li>
<li>Uses the first remote that has the requested artifact
configured</li>
</ol>
<p>The specific order depends on your project’s configuration.</p>
</div>
</div>
<div class="section level2">
<h2 id="best-practices">Best Practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h2>
<div class="section level3">
<h3 id="for-project-setup">For Project Setup<a class="anchor" aria-label="anchor" href="#for-project-setup"></a>
</h3>
<p><strong>Archive raw data:</strong></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Configure raw data archiving (one-time setup)</span></span>
<span><span class="fu"><a href="../reference/projr_yml_dest_add_github.html">projr_yml_dest_add_github</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"raw-data-@version"</span>,</span>
<span>  content <span class="op">=</span> <span class="st">"raw-data"</span>,</span>
<span>  send_cue <span class="op">=</span> <span class="st">"if-change"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Document restoration:</strong></p>
<p>Add to your project <code>README.md</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">## Setup</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="ss">1. </span>Restore project: <span class="in">`projr::projr_restore_repo("owner/repo")`</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="ss">2. </span>Install dependencies: <span class="in">`renv::restore()`</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="ss">3. </span>Build project: <span class="in">`projr::projr_build_dev()`</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="for-collaborators">For Collaborators<a class="anchor" aria-label="anchor" href="#for-collaborators"></a>
</h3>
<p><strong>Share restoration instructions:</strong></p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Option 1: Automated setup</span></span>
<span><span class="fu">projr</span><span class="fu">::</span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="st">"repo"</span><span class="op">)</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">restore</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Option 2: Manual clone, then restore</span></span>
<span><span class="co"># git clone https://github.com/owner/repo</span></span>
<span><span class="co"># cd repo</span></span>
<span><span class="co"># R -e "projr::projr_content_update()"</span></span></code></pre></div>
<p><strong>Test restoration:</strong></p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test in clean environment before sharing</span></span>
<span><span class="va">tempdir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">projr</span><span class="fu">::</span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span>, path <span class="op">=</span> <span class="va">tempdir</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="for-reproducibility">For Reproducibility<a class="anchor" aria-label="anchor" href="#for-reproducibility"></a>
</h3>
<p><strong>Archive everything needed:</strong></p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Archive code (all Git-tracked files)</span></span>
<span><span class="fu"><a href="../reference/projr_yml_dest_add_github.html">projr_yml_dest_add_github</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"code-@version"</span>,</span>
<span>  content <span class="op">=</span> <span class="st">"code"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Archive raw data</span></span>
<span><span class="fu"><a href="../reference/projr_yml_dest_add_github.html">projr_yml_dest_add_github</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"raw-data-@version"</span>,</span>
<span>  content <span class="op">=</span> <span class="st">"raw-data"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Archive outputs for comparison</span></span>
<span><span class="fu"><a href="../reference/projr_yml_dest_add_github.html">projr_yml_dest_add_github</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">"output-@version"</span>,</span>
<span>  content <span class="op">=</span> <span class="st">"output"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Document dependencies:</strong></p>
<p>Use <code>renv</code> for R package versions:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/snapshot.html" class="external-link">snapshot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Document system dependencies in <code>README.md</code>:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="fu">## System Requirements</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a><span class="ss">- </span>R version 4.3.0 or higher</span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="ss">- </span>System libraries: libcurl, libxml2</span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="ss">- </span>pandoc (for rendering documents)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="for-version-control">For Version Control<a class="anchor" aria-label="anchor" href="#for-version-control"></a>
</h3>
<p><strong>Note on version history:</strong></p>
<p><code><a href="../reference/projr_restore.html">projr_content_update()</a></code> always fetches the latest remote
version for archive remotes. To work with artifacts from older versions,
you’ll need to manually download them from the remote source or
implement custom restoration logic.</p>
<p><strong>Document version history:</strong></p>
<p>Keep notes in <code>NEWS.md</code> or <code>CHANGELOG.md</code>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="fu">## Version 0.3.0</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a><span class="ss">- </span>Updated analysis with 2024 data</span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="ss">- </span>Added sensitivity analyses</span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a><span class="fu">## Version 0.2.0</span></span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a><span class="ss">- </span>Revised methods based on reviewer feedback</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="common-pitfalls">Common Pitfalls<a class="anchor" aria-label="anchor" href="#common-pitfalls"></a>
</h2>
<div class="section level3">
<h3 id="no-manifest-file">No Manifest File<a class="anchor" aria-label="anchor" href="#no-manifest-file"></a>
</h3>
<p><strong>Problem:</strong> <code>"No manifest.csv found"</code></p>
<p><strong>Solutions:</strong></p>
<ul>
<li>The project needs to have been built at least once with projr</li>
<li>Clone a project that has manifest in its repository</li>
<li>If manifest is missing, manually download files from GitHub
releases</li>
</ul>
</div>
<div class="section level3">
<h3 id="no-remote-sources">No Remote Sources<a class="anchor" aria-label="anchor" href="#no-remote-sources"></a>
</h3>
<p><strong>Problem:</strong>
<code>"No remote sources configured"</code></p>
<p><strong>Solutions:</strong></p>
<ul>
<li>Check <code>_projr.yml</code> has remote destinations under
<code>build:</code>
</li>
<li>Verify remote configurations are valid with
<code><a href="../reference/projr_yml_check.html">projr_yml_check()</a></code>
</li>
<li>Manually download files from remote sources</li>
</ul>
</div>
<div class="section level3">
<h3 id="authentication-errors">Authentication Errors<a class="anchor" aria-label="anchor" href="#authentication-errors"></a>
</h3>
<p><strong>Problem:</strong>
<code>"Authentication required for GitHub"</code></p>
<p><strong>Solutions:</strong></p>
<ul>
<li>Set up <code>GITHUB_PAT</code> environment variable</li>
<li>Run <code><a href="../reference/instr_auth.html">projr_instr_auth_github()</a></code> for instructions</li>
<li>Verify token with <code>Sys.getenv("GITHUB_PAT")</code>
</li>
<li>Ensure token has <code>repo</code> scope</li>
</ul>
</div>
<div class="section level3">
<h3 id="download-failures">Download Failures<a class="anchor" aria-label="anchor" href="#download-failures"></a>
</h3>
<p><strong>Problem:</strong> Failed to download from remote</p>
<p><strong>Solutions:</strong></p>
<ul>
<li>Check internet connection</li>
<li>Verify remote still exists (GitHub release, local path)</li>
<li>Check authentication if required</li>
<li>Try different remote type:
<code>projr_content_update(type = "local")</code>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="hash-mismatches">Hash Mismatches<a class="anchor" aria-label="anchor" href="#hash-mismatches"></a>
</h3>
<p><strong>Problem:</strong> <code>"File hash mismatch"</code></p>
<p><strong>Solutions:</strong></p>
<ul>
<li>File on remote may be corrupted</li>
<li>File may have been modified outside projr</li>
<li>Try restoring from different remote</li>
<li>Check if remote was updated manually</li>
</ul>
</div>
<div class="section level3">
<h3 id="partial-restoration">Partial Restoration<a class="anchor" aria-label="anchor" href="#partial-restoration"></a>
</h3>
<p><strong>Problem:</strong> Some artifacts restore, others fail</p>
<p><strong>Behavior:</strong> projr continues with available
artifacts</p>
<p><strong>Recovery:</strong></p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Try different remote type</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Try specific artifact</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"raw-data"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Manual download as last resort</span></span>
<span><span class="co"># Download from GitHub releases manually</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<div class="section level3">
<h3 id="check-configuration">Check Configuration<a class="anchor" aria-label="anchor" href="#check-configuration"></a>
</h3>
<p>View remote configuration:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View entire configuration</span></span>
<span><span class="fu"><a href="../reference/projr_yml_get.html">projr_yml_get</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View specific sections</span></span>
<span><span class="fu"><a href="../reference/projr_yml_get.html">projr_yml_get</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">build</span><span class="op">$</span><span class="va">github</span></span>
<span><span class="fu"><a href="../reference/projr_yml_get.html">projr_yml_get</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">build</span><span class="op">$</span><span class="va">local</span></span>
<span></span>
<span><span class="co"># Validate configuration</span></span>
<span><span class="fu"><a href="../reference/projr_yml_check.html">projr_yml_check</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="check-manifest">Check Manifest<a class="anchor" aria-label="anchor" href="#check-manifest"></a>
</h3>
<p>Inspect manifest contents:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read manifest</span></span>
<span><span class="va">manifest</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"manifest.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View entries for specific label</span></span>
<span><span class="va">manifest</span><span class="op">[</span><span class="va">manifest</span><span class="op">$</span><span class="va">label</span> <span class="op">==</span> <span class="st">"raw-data"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># View available versions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">manifest</span><span class="op">$</span><span class="va">version</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="verbose-output">Verbose Output<a class="anchor" aria-label="anchor" href="#verbose-output"></a>
</h3>
<p>Enable detailed output:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set environment variable</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>PROJR_OUTPUT_LEVEL <span class="op">=</span> <span class="st">"debug"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Run restoration</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check detailed logs</span></span>
<span><span class="co"># Located in _tmp/projr/log/</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="test-restoration">Test Restoration<a class="anchor" aria-label="anchor" href="#test-restoration"></a>
</h3>
<p>Test in isolated environment:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create test directory</span></span>
<span><span class="va">test_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">test_dir</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test restoration</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span>, path <span class="op">=</span> <span class="va">test_dir</span><span class="op">)</span>,</span>
<span>  error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Restoration failed: "</span>, <span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span>    <span class="cn">FALSE</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean up</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">result</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Restoration successful!"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">test_dir</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<div class="section level3">
<h3 id="quick-start">Quick Start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h3>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Most common: Clone and restore</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_restore_repo</a></span><span class="op">(</span><span class="st">"owner/repo"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># In existing project: Restore artifacts</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Specific artifact: Restore raw data only</span></span>
<span><span class="fu"><a href="../reference/projr_restore.html">projr_content_update</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"raw-data"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="key-functions">Key Functions<a class="anchor" aria-label="anchor" href="#key-functions"></a>
</h3>
<ul>
<li>
<strong><code><a href="../reference/projr_restore.html">projr_restore_repo()</a></code></strong> - Clone
repository and restore artifacts</li>
<li>
<strong><code><a href="../reference/projr_restore.html">projr_restore_repo_wd()</a></code></strong> - Restore into
current directory</li>
<li>
<strong><code><a href="../reference/projr_restore.html">projr_content_update()</a></code></strong> - Restore in
existing project</li>
</ul>
</div>
<div class="section level3">
<h3 id="key-parameters">Key Parameters<a class="anchor" aria-label="anchor" href="#key-parameters"></a>
</h3>
<ul>
<li>
<strong>label</strong> - Which artifacts to restore (default: all
raw-* artifacts)</li>
<li>
<strong>type</strong> - Which remote type (github, local, osf;
default: first available)</li>
<li>
<strong>title</strong> - Which remote configuration (default: first
available for type)</li>
<li>
<strong>pos</strong> - Source position (source, dest; default:
both)</li>
</ul>
</div>
<div class="section level3">
<h3 id="key-concepts">Key Concepts<a class="anchor" aria-label="anchor" href="#key-concepts"></a>
</h3>
<ul>
<li>
<strong>Artifacts</strong> - Versioned project components (raw-data,
output, docs, code)</li>
<li>
<strong>Manifest</strong> - CSV file tracking file versions and
hashes</li>
<li>
<strong>Remotes</strong> - Sources from which artifacts can be
restored</li>
<li>
<strong>Version resolution</strong> - Determining which version to
restore</li>
</ul>
</div>
<div class="section level3">
<h3 id="see-also">See Also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h3>
<ul>
<li>
<code><a href="../reference/projr_restore.html">?projr_restore</a></code> - Full restoration documentation</li>
<li>
<code><a href="../reference/projr_restore.html">?projr_restore_repo</a></code> - Repository restoration
documentation</li>
<li>
<code><a href="../articles/send-to-remotes.html">vignette("send-to-remotes")</a></code> - Configuring remotes for
archiving</li>
<li>
<code><a href="../articles/environment.html">vignette("environment")</a></code> - Environment variables
including <code>GITHUB_PAT</code>
</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Miguel Rodo. Built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> and R</p>
</div>

<div class="pkgdown-footer-right">
  <p><a href="LICENSE.html">License</a> • projr is free and open source software</p>
</div>

    </footer>
</div>





  </body>
</html>
