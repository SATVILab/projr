% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/restore-repo.R, R/restore.R
\name{projr_restore_repo}
\alias{projr_restore_repo}
\alias{projr_restore_repo_wd}
\alias{projr_restore}
\alias{projr_content_checkout}
\alias{projr_content_update}
\alias{projr_content_restore}
\title{Restore project artefact directories}
\usage{
projr_restore_repo(
  repo,
  path = NULL,
  label = NULL,
  pos = NULL,
  type = NULL,
  title = NULL
)

projr_restore_repo_wd(
  repo,
  label = NULL,
  pos = NULL,
  type = NULL,
  title = NULL
)

projr_content_checkout(
  version = NULL,
  label = NULL,
  pos = NULL,
  type = NULL,
  title = NULL,
  clear = FALSE
)

projr_content_update(
  label = NULL,
  pos = NULL,
  type = NULL,
  title = NULL,
  clear = FALSE
)

projr_content_restore(
  label = NULL,
  pos = NULL,
  type = NULL,
  title = NULL,
  clear = FALSE
)
}
\arguments{
\item{repo}{character. GitHub repository (\code{"owner/repo"} or \code{"repo"}).
(Only for repository restoration functions.)
Must be a single non-empty character string.}

\item{path}{character or NULL. Local path for cloning the repository. Default is \code{NULL},
creating a subdirectory named after the repo. \code{"."} restores directly into the
current directory. Must be NULL or a single non-empty character string.}

\item{label}{character vector or NULL. Specifies labels of artefacts to restore.
Default is \code{NULL}, restoring all \code{raw} artefacts (e.g. \code{raw-data}).
Must be NULL or a non-empty character vector with valid directory labels.}

\item{pos}{character vector or NULL. Specifies preferred source: \code{"source"} (directories)
or \code{"dest"} (build destinations). Default is \code{NULL}, checking both in order.
Must be NULL or one/both of \code{"source"} and \code{"dest"}.}

\item{type}{character or NULL. Remote type: \code{"local"}, \code{"osf"} or \code{"github"}.
Default is \code{NULL}, automatically choosing the first available remote.
Must be NULL or one of the valid remote types.}

\item{title}{character or NULL. Remote title as specified in \verb{_projr.yml}.
Default is \code{NULL}, using the first available title for the selected type.
Must be NULL or a single non-empty character string.}

\item{version}{character or NULL. Version to restore (e.g., \code{"0.0.1"} or \code{"v0.0.1"}).
Default is \code{NULL}, which restores the latest available version.
(Only for \code{projr_content_checkout()}.)
Must be NULL or a single non-empty character string with valid version format.}

\item{clear}{logical. If \code{TRUE}, clears existing local artefact directories
before restoration. Default is \code{FALSE}.}
}
\value{
Invisibly returns \code{TRUE} if all restorations are successful, \code{FALSE} otherwise.
For \code{projr_content_checkout()}, \code{projr_content_update()}, and \code{projr_content_restore()},
returns \code{FALSE} if no labels are found to restore or if any restoration fails.
For \code{projr_restore_repo()}, returns \code{FALSE} if cloning or restoration fails.
}
\description{
Use \code{projr_content_checkout()} to restore artefacts from any version (including latest).
Use \code{projr_content_update()} as a convenience wrapper for restoring the latest version.
Use \code{projr_content_restore()} to restore artefacts for the current project version.
If the project isn't available locally yet,
\code{projr_restore_repo()} will clone it and then restore its artefacts.
}
\details{
These functions restore artefact directories from remote sources:
\itemize{
\item \code{projr_content_checkout()} is the main function for restoring artefacts. When \code{version} is
NULL, restores the latest version. When \code{version} is specified, attempts to restore that
version. If the exact version is not available on the remote but a compatible version exists
(same content according to local manifest), it will download the compatible version and
inform the user.
\item \code{projr_content_update()} is a convenience wrapper that calls \code{projr_content_checkout()} with
\code{version = NULL}, always restoring the latest available version.
\item \code{projr_content_restore()} restores artefacts for the current project version (without dev
suffix). For example, if the project is at version v1.0.0-3, it restores v1.0.0.
\item \code{projr_restore_repo()} clones a GitHub repository into a subdirectory (or specified path),
then restores artefacts from that repository's remote sources.
\item \code{projr_restore_repo_wd()} clones directly into the current working directory, then restores artefacts.
}

\strong{Input Validation:}
All parameters are validated before execution:
\itemize{
\item \code{label}: Must be NULL or a non-empty character vector of valid directory labels
\item \code{pos}: Must be NULL or contain only "source" and/or "dest"
\item \code{type}: Must be NULL or one of "local", "osf", or "github"
\item \code{title}: Must be NULL or a single character string
\item \code{version}: Must be NULL or a single character string with valid version format
\item \code{repo}: Must be a single non-empty character string
\item \code{path}: Must be NULL or a single non-empty character string
}

\strong{Error Handling:}
The functions handle errors gracefully:
\itemize{
\item Missing \code{manifest.csv} triggers an informative error
\item Invalid labels or missing remote sources result in warning messages and skipped restoration
\item Git clone failures are caught and reported
\item Errors during restoration are caught per label, allowing partial success
\item Invalid or non-existent versions trigger informative errors
}
}
\examples{
\dontrun{
# Restore latest version (most common use case)
projr_content_update()

# Restore specific labels from latest version
projr_content_update(label = c("raw-data", "cache"))

# Restore from specific source type
projr_content_update(type = "local", title = "archive")

# Restore specific version
projr_content_checkout(version = "0.0.1")

# Restore latest version (equivalent to projr_content_update())
projr_content_checkout(version = NULL)

# Restore specific labels from specific version
projr_content_checkout(version = "v0.0.2", label = c("raw-data", "output"))

# Restore current project version (without dev suffix)
projr_content_restore()

# Clone repository into subdirectory and restore artefacts
projr_restore_repo("owner/repo")

# Clone to specific path
projr_restore_repo("owner/repo", path = "my-project")

# Clone repository into current directory and restore artefacts
projr_restore_repo_wd("owner/repo")
}

}
