<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>intro</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">intro</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(projr)</span></code></pre></div>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<div id="tldr" class="section level2">
<h2>TL;DR</h2>
<div id="extreme-version" class="section level3">
<h3>Extreme version</h3>
<p>The <code>projr</code> workflow:</p>
<ul>
<li><strong>Initialisation</strong>: Run
<code>projr::projr_init()</code> to set up the project with metadata,
<code>projr</code>-specific configuration and a Git repo connected to
GitHub (if you so choose).</li>
<li><strong>Building the project</strong>: Run
<code>projr::projr_build_output()</code> to build the project, version
the project and its components, and upload the components to GitHub, OSF
and/or a local folder.</li>
</ul>
<p>Project directory structure (e.g. that raw data are kept in the
<code>raw-data</code> folder) and on-build actions (e.g. uploading to
GitHub) are specified in the <code>_projr.yml</code> file.</p>
<p>There are only three functions to remember:
.init()<code>, projr_build_output()</code> and
.path_get()<code>. The</code>projr<code>configuration file,</code>_projr.yml`,
specifies project defaults that are appropriate for the majority of
projects, but can be customised to your needs.</p>
</div>
<div id="less-extreme-version" class="section level3">
<h3>Less extreme version</h3>
<p><code>projr</code> is a package that helps you to set up and maintain
a project in a way that is reproducible, shareable and versioned.</p>
<ul>
<li><strong>Initialisation</strong>: An interactive initialisation
function, <code>projr::projr_init()</code>.
<ul>
<li>This sets up the project with metadata, <code>projr</code>-specific
configuration and a Git repo connected to GitHub (if you so
choose).</li>
</ul></li>
<li><strong>Project and component versioning</strong>: The project as a
whole is given a version (e.g. <code>v1.2.1</code>), and the components
of the project (e.g. code, data, figures, documents) versioned
individually and linked to this version.
<ul>
<li>This means that you can always find the exact inputs that were used
to create the outputs.</li>
</ul></li>
<li><strong>Test builds</strong>: To test build the project, run
<code>projr::projr_build_dev()</code>.
<ul>
<li>This renders the literate programming documents in your project and
saves the outputs to a temporary directory (in your workspace).</li>
</ul></li>
<li><strong>Builds</strong>: To build the project, run
<code>projr::projr_build_output()</code>.
<ul>
<li>This saves the outputs to their final destination (e.g. the
<code>_output</code> folder), as these are regarded as the latest state
of the project (rather than a development version).</li>
<li>In addition, a component of the pverall project version is bumped
(e.g. <code>v1.2.1</code> changes to <code>v2.0.0</code> if the major
version is bumped), and the individual project components (e.g. code,
data, figures, documents) are versioned and linked to this new
version.</li>
<li>Finally, the project components are uploaded to GitHub, OSF and/or a
local folder.</li>
</ul></li>
</ul>
<p>The <code>_projr.yml</code> file specifies the project directory
structure and on-build actions. The <code>directories</code> key
specifies the project directory structure, in terms of where raw data,
outputs (intermediate and final) and rendered documents are kept. The
<code>build</code> key specifies on-build actions, such as whether and
how the code are versioned, and which project components (raw data,
outputs, docs) are uploaded to GitHub, OSF and/or a local folder.</p>
<p>There are only three functions to remember:
.init()<code>, projr_build_output()</code> and
.path_get()<code>(which is described later). The</code>projr<code>configuration file,</code>_projr.yml`,
specifies project defaults that are appropriate for the majority of
projects, but is highly customisable for your needs.</p>
</div>
</div>
<div id="install-projr" class="section level2">
<h2>Install <code>projr</code></h2>
<p>Install <code>projr</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">&quot;remotes&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>}</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;SATVILab/projr&quot;</span>)</span></code></pre></div>
</div>
<div id="the-projr-workflow" class="section level2">
<h2>The <code>projr</code> workflow</h2>
<div id="initialising-the-project" class="section level3">
<h3>Initialising the project</h3>
<ol style="list-style-type: decimal">
<li>Open <code>R</code> in the working directory you want to use it
in.</li>
</ol>
<p>If using <code>RStudio</code>, then the easiest way to do this is to
open <code>RStudio</code>, click <code>File</code>, then
<code>New Project</code> then choose whether you want to open it in an
existing directory or create a new one.</p>
<ol start="2" style="list-style-type: decimal">
<li>Run <code>projr::projr_init()</code>.</li>
</ol>
<p>This will prompt you for metadata about your project, such as a
description for it as well as your name and email address. You are also
able to choose whether to create a Git repo and, if so, whether to use
GitHub (if not already set up to use GitHub, then see the tips below on
creating a GitHub account)</p>
<p>Overall, what
.init<code>does is set up the project with metadata,</code>projr`-specific
configuration and a Git repo connected to GitHub (if you so choose).</p>
</div>
<div id="building-the-project" class="section level3">
<h3>Building the project</h3>
<div id="projr_build_output" class="section level4">
<h4>projr_build_output()`</h4>
<p>One can build the project using
projr_build_output()<code>. This will automatically detect whatever literate programming documents are used (Rmd&#39;s, Qmd&#39;s, Quarto projects,</code>bookdown<code>projects) and render all of them. By deafult, the rendered documents (e.g. HTML, PDF) are saved to the</code>_docs`
directory.</p>
</div>
<div id="versioning" class="section level4">
<h4>Versioning</h4>
<div id="project-versioning" class="section level5">
<h5>Project versioning</h5>
<p>The project, as whole, is versioned. This version is specified in the
<code>DESCRIPTION</code> file, and is updated automatically by
<code>projr</code> at each build.</p>
<p>Semantic versioning is used, so the version is of the form
<code>x.y.z</code>, where <code>x</code> is the major version,
<code>y</code> is the minor version and <code>z</code> is the patch
version. For example, a project version (before a build) might be
<code>0.1.0</code>.</p>
<ul>
<li>If the <code>patch</code> version is updated, then the version would
become <code>0.1.1</code>.</li>
<li>If the <code>minor</code> version is updated, then the version would
become <code>0.2.0</code>.</li>
<li>If the <code>major</code> version is updated, then the version would
become <code>1.0.0</code>.</li>
</ul>
<p>This helps communicate the size of the changes made in a build. In
software development, the <code>patch</code> version is updated for
small changes, the <code>minor</code> version for new features and the
<code>major</code> version for breaking changes.</p>
<p>For analysis projects (including, e.g. data processing sub-projects),
the <code>patch</code> version might be updated for small changes, the
<code>minor</code> version for new analyses and the <code>major</code>
version for changes to the data processing pipeline. It’s up to you to
decide what each one means - just communicate it to your
collaborators.</p>
</div>
<div id="component-versioning" class="section level5">
<h5>Component versioning</h5>
<p>At each build, <code>projr</code> also versions project components
(code, <code>R</code> packages and files). This ensures that the outputs
(e.g. figures, tables and documents) are linked to versioned inputs
(e.g. raw data and code). They are linked by the project version, so
that you can always find the exact inputs that were used to create the
outputs.</p>
</div>
</div>
<div id="sharing-the-project" class="section level4">
<h4>Sharing the project</h4>
<p>Optionally, immediately after each build <code>projr</code> uploads
these components to GitHub, OSF and/or a local folder. For example, by
default the raw data, output (e.g. figures) and rendered documents
(e.g. HTMLs, PDFs)s are uploaded to GitHub as GitHub releases.</p>
<p>It is not important to understand exactly what a GitHub release is at
this point, other than to note that it is a free, easy, secure way to
share non-code files (e.g. data, documents) with others.</p>
<p>This is done automatically at each build, and is highly customisable.
Uploads to the Open Science Foundation (OSF) and local folders are also
supported.</p>
<p>To understand and customise the above process further, it’s important
to familiarse yourself with the <code>projr</code> configuration file,
<code>_projr.yml</code>. Details of all the options are available in
later vignettes.</p>
</div>
</div>
</div>
<div id="projr.yml" class="section level2">
<h2><code>_projr.yml</code></h2>
<p>The <code>projr</code> configuration file, <code>_projr.yml</code>,
specifies two main things:</p>
<ul>
<li>What is kept where (e.g. which folder contains the raw data). This
falls under the <code>directories</code> key.</li>
<li>If and how project inputs and outputs are shared and stored (e.g. on
GitHub, OSF or a local path). This falls under the <code>build</code>
key.</li>
</ul>
<div id="directories" class="section level3">
<h3><code>directories</code></h3>
<div id="structure" class="section level4">
<h4>Structure</h4>
<p>Here is the default <code>directories</code> key:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># default directory settings:</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="at">  </span><span class="fu">raw-data</span><span class="kw">:</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _raw_data</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="at">  </span><span class="fu">cache</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _tmp</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="at">  </span><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _output</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="at">  </span><span class="fu">docs</span><span class="kw">:</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> docs</span></span></code></pre></div>
<p>The purpose is to specify the paths to the key folders in your
project. They are as follows:</p>
<ul>
<li><code>raw-data</code>: The folder where raw data is stored.</li>
<li><code>cache</code>: This stores files created during project builds
that you do not want to share. For example, if you use the
<code>R</code> package <code>targets</code> to cache intermediate
output, the cached intermediate output will go here.</li>
<li><code>output</code>: This also stores files created during project
builds - but these you want to share, e.g. figures or tables.</li>
<li><code>docs</code>: This is where the rendered documents are stored,
e.g. the HTML or PDF files.</li>
</ul>
<p>To access the paths to these folders, use the .path_get` function.
For example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">projr_path_get</span>(<span class="st">&quot;output&quot;</span>)</span></code></pre></div>
<p>will return</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="st">&quot;_output&quot;</span></span></code></pre></div>
<p>It can be given further arguments, specifying sub-directories and
file names. For example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">projr_path_get</span>(<span class="st">&quot;output&quot;</span>, <span class="st">&quot;figure&quot;</span>, <span class="st">&quot;nobel_prize_winning_plot.png&quot;</span>)</span></code></pre></div>
<p>will return</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="st">&quot;_output/figure/nobel_prize_winning_plot.png&quot;</span></span></code></pre></div>
<p>So, code saving a figure to this path might look like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span><span class="fu">.path_get</span>(<span class="st">&quot;output&quot;</span>, <span class="st">&quot;figure&quot;</span>, <span class="st">&quot;nobel_prize_winning_plot.png&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># ... code to create the plot</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>In future, if the path to the output folder changes in
<code>_projr.yml</code> (e.g. to <code>_output_figures</code> instead of
<code>_output</code>), .path_get` will automatically update the
path.</p>
<p>Essentially,
.path_get<code>should replace either hardcoded paths (</code>“_output/figure/nobel_prize_winning_plot.png”<code>) or</code>file.path<code>/</code>here::here`
calls.</p>
</div>
<div id="benefits" class="section level4">
<h4>Benefits</h4>
<p>Using folders in the manner described (e.g. storing raw data in the
<code>raw-data</code> folder and outputs in the <code>output</code>
folder) has the following benefits:</p>
<ul>
<li>A person new to the project can read one file
(<code>_projr.yml</code>) rather than trawling through source code to
understand the project structure.</li>
<li>Sharing parts of the project (e.g. the raw data) and setting up the
project again (e.g. on a new computer or on a collaborator’s computer)
is easier as like things are kept together. This is as opposed to, for
example, keeping some raw data in <code>_raw_data</code>, others in
<code>inst/extdata</code> and others at the root of the project, which
makes bringing all the pieces together harder.</li>
<li>It helps <code>projr</code> help you, as it understands your project
structure. This takes the following forms:
<ul>
<li><code>projr</code> can “protect” the output folder. The
projr_build_dev()<code>function (described more below) builds the project, but saves outputs to the</code>cache<code>folder rather than the</code>output`
folder. This prevents you accidentally overwriting outputs from a
previous successful build whilst iterating on the code in preparation
for the next build.</li>
<li><code>projr</code> can upload the data to various places. As
described in the next subsection (<code>build</code>),
<code>projr</code> can send data from these folders
(<code>raw-data</code>, <code>output</code>, etc.) to various places -
at present, this includes GitHub releases, OSF and local folders
(e.g. your OneDrive project folder).</li>
<li><code>projr</code> can automatically ignore large files from Git. If
you don’t understand what this means, then don’t worry - in fact, it’s
<em>great</em> that you’re here as this means <code>projr</code> can
help you to use the incredibly useful versioning tool that is Git
without having to understand its details.</li>
</ul></li>
</ul>
<p>There are other benefits, but they rely on understanding some more
advanced <code>projr</code> features, which are not covered in this
vignette.</p>
</div>
</div>
<div id="build" class="section level3">
<h3><code>build</code></h3>
<p>The <code>build</code> key specifies actions that take place
automatically when you build the project.</p>
<p>Here is the first part of the default <code>build</code> key (if the
project is connected to GitHub):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="at">    </span><span class="fu">input</span><span class="kw">:</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="at">      </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Project inputs&quot;</span></span></code></pre></div>
<p>This specifies that, after the project is built, the
<code>raw-data</code> directory (i.e. the contents of
<code>_raw_data</code>) is uploaded to GitHub as a release whose name is
<code>input</code>.</p>
<p>By default, it is uploaded to a file called
<code>raw-data-v&lt;project_version&gt;.zip</code>, where
<code>&lt;project_version&gt;</code> is the version of the project
(e.g. <code>0.1.0</code>). Furthermore, by default this only takes place
when anything changes within <code>raw-data</code>, i.e. file(s) are
added, removed or changed.</p>
<p>These uploads are designed to be highly flexible, and can be
customised to your needs. Please see the <code>destination</code>
vignette for more details (<code>evignette(&quot;destination&quot;)</code>).</p>
<p>By default, the <code>build</code> key can also specify that the
<code>output</code> and <code>docs</code> folders are uploaded to GitHub
as releases, or alternatively to OSF or a local folder.</p>
<p>In addition, the build key handles Git settings, such as whether or
not Git commits are automatically created before and after each build,
and whether they are pushed to GitHub automatically. By default, they
are, which means that the Git history is updated with each build, and
the changes are pushed to GitHub.</p>
</div>
</div>
<div id="use-.build_-functions-to-build-your-project" class="section level2">
<h2>Use .build_` functions to build your project</h2>
<p><code>projr</code> provides two main functions to help you build your
project, projr_build_output()<code>and projr_build_dev()</code>. In a
nutshell,
projr_build_dev()<code>is for checking code as you write it, and projr_build_output()</code>
is for snapshotting and sharing your project.</p>
<p>Both will automatically detect the type of source documents you have
(Rmd’s, Qmd’s, Quarto projects, <code>bookdown</code> projects) and
render them accordingly.</p>
<div id="projr_build_output-1" class="section level3">
<h3>projr_build_output()`</h3>
<p>projr_build_output()<code>- This does the same as projr_build_dev()</code>,
except that the output documents are saved to their final destination
(as specified in <code>docs</code>/<code>output</code>) and the outputs
(GitHub/OSF) are sent to, as desired). - If you set the project up with
GitHub, then by default the <code>raw-data</code>, <code>docs</code> and
<code>output</code> folders are uploaded to GitHub as GitHub
releases.</p>
</div>
<div id="projr_build_dev" class="section level3">
<h3>projr_build_dev()`</h3>
<p>projr_build_dev()` renders the literate programming documents in your
document.</p>
<p>Any results are saved to the <code>cache</code> directory, under
<code>&lt;cache&gt;/projr/v&lt;project_version&gt;/&lt;directory_label&gt;</code>.
For example, suppose we have the code</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">png</span>(<span class="at">filename =</span><span class="fu">.path_get</span>(<span class="st">&quot;output&quot;</span>, <span class="st">&quot;figure&quot;</span>, <span class="st">&quot;nobel_prize_winning_plot.png&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co"># ... code to create the plot</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<p>in our <code>Rmd</code> file. When using
.build_dev<code>, the plot will be saved to</code>_tmp/projr/v<project_version>/output/figure/nobel_prize_winning_plot.png<code>. This is instead of saving it to</code>_output/figure/nobel_prize_winning_plot.png`,
which is the final destination.</p>
<p>The same goes for the rendered documents (e.g. HTML files), which
would be saved to
<code>_tmp/projr/v&lt;project_version&gt;/docs</code>.</p>
<p>In addition,
.build_dev<code>allows you to render just a chosen selection of documents, e.g. projr_build_dev(&quot;analysis.Rmd&quot;)</code>
will render just the <code>analysis.Rmd</code> document (can do more
than one).</p>
</div>
</div>
<div id="create-a-github-account-and-save-github-credentials" class="section level2">
<h2>Create a GitHub account, and save GitHub credentials</h2>
<p>This section is not really necessary to introduct <code>projr</code>,
but Git and GitHub are so useful for code versioning and sharing that
it’s worth mentioning here.</p>
<div id="do-i-need-git-and-github" class="section level3">
<h3>Do I need Git and GitHub?</h3>
<p>Strictly speaking, you do not <em>need</em> a GitHub account.
However, it is a good idea to have one, as it is a great way to
collaborate with and share with others. Don’t worry about learning Git -
<code>projr</code> can (and will by default) handle that for you.</p>
<p>There are three steps to setting up Git and GitHub:</p>
<ol style="list-style-type: decimal">
<li>Create a GitHub account.</li>
<li>Generate a GitHub personal authentication token (PAT).</li>
<li>Save this token to your computer.</li>
</ol>
<p>One does not need to install Git, as <code>projr</code> reverts to
the <code>gert</code> <code>R</code> package if <code>Git</code> is not
installed.</p>
<div id="the-steps" class="section level4">
<h4>The steps</h4>
<p><strong>Create a GitHub account</strong></p>
<p>If you don’t have a GitHub account, create one <a href="https://github.com">here</a>. You can follow the advice <a href="https://happygitwithr.com/github-acct">here</a> for choosing a
user name.</p>
<p><strong>Generate a GitHub PAT</strong></p>
<p>If you have not set up your GitHub credentials, do the following:</p>
<ol style="list-style-type: decimal">
<li>Install the <code>usethis</code> package:</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">&quot;usethis&quot;</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) {</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;usethis&quot;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>}</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Use <code>usethis</code> to set up your GitHub credentials:</li>
</ol>
<p>Run the following in <code>R</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_github_token</span>()</span></code></pre></div>
<p>Your browser should open to GitHub. At the bottom of the page, click
<code>Generate token</code>. Then, copy the token.</p>
<p><strong>Save your GitHub PAT</strong></p>
<ol start="3" style="list-style-type: decimal">
<li>Use <code>usethis</code> to save your GitHub credentials:</li>
</ol>
<p>Run the following in <code>R</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>()</span></code></pre></div>
<p>Paste your Git credentials when prompted.</p>
<p>You should now be able to download and upload private repositories to
GitHub (i.e. repositories that are only accessible to you and those you
give access to).</p>
<p><em>Note</em>: The above instructions are taken from <a href="https://happygitwithr.com/https-pat#tldr">here</a>, which provides
slightly more details.</p>
</div>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
