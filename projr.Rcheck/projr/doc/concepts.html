<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Concepts</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Concepts</h1>



<div id="core-concepts" class="section level1">
<h1>Core concepts</h1>
<p>This article explains the key concepts behind projr’s approach to
reproducible research.</p>
<hr />
<div id="single-purpose-directories" class="section level2">
<h2>Single-purpose directories</h2>
<div id="the-problem" class="section level3">
<h3>The problem</h3>
<p>Research projects often have an ad-hoc structure where:</p>
<ul>
<li>Data files are scattered across multiple locations</li>
<li>Output files mix with source code</li>
<li>Temporary files clutter the repository</li>
<li>It’s unclear what each directory contains</li>
</ul>
<p>This makes it difficult to:</p>
<ul>
<li>Share specific parts of the project</li>
<li>Restore the project on a new machine</li>
<li>Understand the project structure at a glance</li>
</ul>
</div>
<div id="the-projr-solution" class="section level3">
<h3>The projr solution</h3>
<p>projr organises projects into <strong>single-purpose
directories</strong>, each with a clear role:</p>
<pre><code>my-project/
├── _raw_data/          # Source data (never modified)
├── _output/            # Final outputs (figures, tables)
├── _tmp/               # Temporary/cache files
├── docs/               # Rendered documents (HTML, PDF)
├── R/                  # Source code
├── analysis.Rmd        # Analysis documents
└── _projr.yml          # Configuration</code></pre>
<p><strong>Benefits:</strong></p>
<ol style="list-style-type: decimal">
<li><strong>Clarity</strong>: Anyone can understand the structure from
<code>_projr.yml</code></li>
<li><strong>Selective sharing</strong>: Archive only what’s needed
(e.g., data + outputs)</li>
<li><strong>Restoration</strong>: Easily restore projects on new
machines</li>
<li><strong>Automation</strong>: projr can manage these directories
automatically</li>
</ol>
</div>
<div id="directory-labels" class="section level3">
<h3>Directory labels</h3>
<p>Each directory has a <strong>label</strong> that describes its
purpose:</p>
<ul>
<li><code>raw-data</code> → source data</li>
<li><code>cache</code> → temporary files</li>
<li><code>output</code> → final outputs</li>
<li><code>docs</code> → rendered documents</li>
</ul>
<p>Labels have <strong>prefixes</strong> that determine their role:</p>
<ul>
<li><code>raw-*</code> → source inputs</li>
<li><code>cache-*</code> → temporary storage</li>
<li><code>output-*</code> → final outputs</li>
<li><code>docs-*</code> → documentation</li>
</ul>
<p><strong>Custom labels:</strong></p>
<p>You can create custom labels following the prefix rules:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">  </span><span class="fu">raw-data-public</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _raw_data_public</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">  </span><span class="fu">raw-data-sensitive</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _raw_data_sensitive</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">  </span><span class="fu">output-figures</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _output/figures</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="at">  </span><span class="fu">output-tables</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _output/tables</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="versioned-builds" class="section level2">
<h2>Versioned builds</h2>
<div id="the-problem-1" class="section level3">
<h3>The problem</h3>
<p>In typical research projects:</p>
<ul>
<li>It’s unclear which version of data produced which outputs</li>
<li>Reproducing an earlier analysis requires Git archaeology</li>
<li>Dependencies (R packages) change over time</li>
<li>No formal link between code version and outputs</li>
</ul>
</div>
<div id="the-projr-solution-1" class="section level3">
<h3>The projr solution</h3>
<p>projr implements <strong>versioned builds</strong> that:</p>
<ol style="list-style-type: decimal">
<li>Assign a version to the entire project (e.g.,
<code>v0.1.0</code>)</li>
<li>Version individual components (code, data, outputs)</li>
<li>Link outputs to specific input versions via a manifest</li>
<li>Optionally capture R dependencies with renv</li>
</ol>
<p><strong>Version numbers:</strong></p>
<p>projr uses semantic versioning (x.y.z):</p>
<ul>
<li><strong>Major</strong> (x): Breaking changes or major
milestones</li>
<li><strong>Minor</strong> (y): New features or analyses</li>
<li><strong>Patch</strong> (z): Small changes or bug fixes</li>
</ul>
<p><strong>Example progression:</strong></p>
<pre><code>v0.1.0  Initial analysis
  ↓
v0.1.1  Fix typo in figure
  ↓
v0.2.0  Add sensitivity analysis
  ↓
v1.0.0  Final publication version</code></pre>
</div>
<div id="component-versioning" class="section level3">
<h3>Component versioning</h3>
<p>Each build versions:</p>
<ul>
<li><strong>Code</strong>: Git commit SHA</li>
<li><strong>Raw data</strong>: Directory hash (SHA-256)</li>
<li><strong>Outputs</strong>: Directory hash</li>
<li><strong>Documents</strong>: Directory hash</li>
<li><strong>R packages</strong>: renv.lock file (optional)</li>
</ul>
<p>These are linked in the <strong>manifest</strong>:</p>
<pre><code>output/manifest.csv:
  version: v0.1.0
  code_sha: abc123...
  raw_data_hash: def456...
  output_hash: ghi789...</code></pre>
<p><strong>Traceability:</strong></p>
<p>Given an output file, you can trace back to:</p>
<ol style="list-style-type: decimal">
<li>Which project version created it</li>
<li>Which raw data was used</li>
<li>Which code (Git commit) generated it</li>
<li>Which R packages were installed</li>
</ol>
<hr />
</div>
</div>
<div id="development-vs-final-builds" class="section level2">
<h2>Development vs final builds</h2>
<div id="development-builds" class="section level3">
<h3>Development builds</h3>
<p><strong>Purpose</strong>: Safe iteration whilst coding</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">projr_build_dev</span>()</span></code></pre></div>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Routes outputs to cache
(<code>_tmp/projr/v&lt;version&gt;/</code>)</li>
<li>Doesn’t modify <code>_output</code> or <code>docs</code></li>
<li>No version bump</li>
<li>No archiving</li>
<li>Fast feedback loop</li>
</ul>
<p><strong>Use when:</strong></p>
<ul>
<li>Testing code changes</li>
<li>Debugging analysis</li>
<li>Iterating on documents</li>
<li>Checking output before committing</li>
</ul>
</div>
<div id="final-builds" class="section level3">
<h3>Final builds</h3>
<p><strong>Purpose</strong>: Create versioned releases</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">projr_build</span>()        <span class="co"># patch bump</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">projr_build_minor</span>()  <span class="co"># minor bump</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">projr_build_major</span>()  <span class="co"># major bump</span></span></code></pre></div>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Clears and populates <code>_output</code> and <code>docs</code></li>
<li>Bumps version number</li>
<li>Creates manifest</li>
<li>Archives to GitHub/OSF/local</li>
<li>Commits to Git (if configured)</li>
</ul>
<p><strong>Use when:</strong></p>
<ul>
<li>Ready to share results</li>
<li>Creating a milestone</li>
<li>Publishing results</li>
<li>Archiving for posterity</li>
</ul>
<hr />
</div>
</div>
<div id="build-clearing-behavior" class="section level2">
<h2>Build clearing behavior</h2>
<div id="overview" class="section level3">
<h3>Overview</h3>
<p>projr manages when and how output directories are cleared during
builds to ensure clean, reproducible results while preventing accidental
data loss.</p>
</div>
<div id="clearing-modes" class="section level3">
<h3>Clearing modes</h3>
<p>The <code>clear_output</code> parameter controls when directories are
cleared:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Clear before build (default)</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">projr_build_patch</span>(<span class="at">clear_output =</span> <span class="st">&quot;pre&quot;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># Clear after build</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">projr_build_patch</span>(<span class="at">clear_output =</span> <span class="st">&quot;post&quot;</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co"># Never clear automatically</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">projr_build_patch</span>(<span class="at">clear_output =</span> <span class="st">&quot;never&quot;</span>)</span></code></pre></div>
<p>You can also set this globally via environment variable:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">PROJR_CLEAR_OUTPUT =</span> <span class="st">&quot;post&quot;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="fu">projr_build_patch</span>()  <span class="co"># Uses &quot;post&quot; mode</span></span></code></pre></div>
</div>
<div id="mode-comparison" class="section level3">
<h3>Mode comparison</h3>
<table>
<colgroup>
<col width="11%" />
<col width="27%" />
<col width="41%" />
<col width="19%" />
</colgroup>
<thead>
<tr class="header">
<th>Mode</th>
<th>When cleared</th>
<th>Safe for iteration?</th>
<th>Use case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&quot;pre&quot;</code></td>
<td>Before build starts</td>
<td>✓ Yes</td>
<td>Default: Clean slate, save directly to final locations</td>
</tr>
<tr class="even">
<td><code>&quot;post&quot;</code></td>
<td>After build completes</td>
<td>✓ Yes</td>
<td>Conservative: Preserve outputs until after successful build</td>
</tr>
<tr class="odd">
<td><code>&quot;never&quot;</code></td>
<td>Never</td>
<td>✗ Manual control needed</td>
<td>Advanced: User manages all clearing</td>
</tr>
</tbody>
</table>
</div>
<div id="what-gets-cleared" class="section level3">
<h3>What gets cleared?</h3>
<p><strong>In development builds
(<code>projr_build_dev()</code>):</strong></p>
<ul>
<li>Cache directories are cleared</li>
<li>Final <code>_output</code> and <code>docs</code> directories are
never touched</li>
<li>Safe for rapid iteration</li>
</ul>
<p><strong>In final builds (<code>projr_build()</code>,
etc.):</strong></p>
<p>Mode <code>&quot;pre&quot;</code>: - Before build: Clears cache AND final
<code>_output</code> directories - During build: Renders to final
locations directly - After build: Final outputs contain only current
build results</p>
<p>Mode <code>&quot;post&quot;</code>: - Before build: Clears cache only
(preserves final <code>_output</code>) - During build: Renders to cache
- After build: Clears final directories, then copies from cache</p>
<p>Mode <code>&quot;never&quot;</code>: - No automatic clearing - New files may
mix with old files - Requires manual directory management</p>
</div>
<div id="example-workflows" class="section level3">
<h3>Example workflows</h3>
<p><strong>Workflow 1: Default (clear before)</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Clean slate approach</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">projr_build_patch</span>(<span class="at">clear_output =</span> <span class="st">&quot;pre&quot;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># 1. Clears _output/ completely</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co"># 2. Builds analysis</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co"># 3. Saves outputs directly to _output/</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co"># 4. Archives to remotes (if configured)</span></span></code></pre></div>
<p><strong>Workflow 2: Conservative (clear after)</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Safety-first approach</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="fu">projr_build_patch</span>(<span class="at">clear_output =</span> <span class="st">&quot;post&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># 1. Keeps existing _output/ intact</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co"># 2. Builds to cache (_tmp/projr/v0.0.1/)</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co"># 3. After successful build, clears _output/</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co"># 4. Copies from cache to _output/</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co"># 5. Archives to remotes (if configured)</span></span></code></pre></div>
<p><strong>Workflow 3: Manual control</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Advanced: Manual clearing</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">&quot;_output&quot;</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)  <span class="co"># Clear manually</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">projr_build_patch</span>(<span class="at">clear_output =</span> <span class="st">&quot;never&quot;</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co"># 1. No automatic clearing</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co"># 2. Builds to specified locations</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co"># 3. User responsible for cleanup</span></span></code></pre></div>
</div>
<div id="special-old-directory-preservation" class="section level3">
<h3>Special: “old” directory preservation</h3>
<p>The cache clearing process preserves a special <code>old/</code>
subdirectory for archival purposes:</p>
<pre><code>_tmp/projr/v0.0.1/
├── output/           # Cleared each build
├── docs/             # Cleared each build
└── old/              # Never cleared automatically
    └── archived_results.csv</code></pre>
<p>This allows you to manually preserve important intermediate results
across builds.</p>
<hr />
</div>
</div>
<div id="manifests" class="section level2">
<h2>Manifests</h2>
<div id="what-is-a-manifest" class="section level3">
<h3>What is a manifest?</h3>
<p>A manifest is a CSV file that records:</p>
<ul>
<li>What was built</li>
<li>Which inputs were used</li>
<li>When it was built</li>
<li>SHA-256 checksums for verification</li>
</ul>
<p><strong>Example manifest:</strong></p>
<pre class="csv"><code>label,path,hash,version,timestamp
raw-data,_raw_data,abc123...,v0.1.0,2024-01-15T10:30:00Z
output,_output,def456...,v0.1.0,2024-01-15T10:35:00Z
docs,docs,ghi789...,v0.1.0,2024-01-15T10:35:00Z</code></pre>
</div>
<div id="why-manifests-matter" class="section level3">
<h3>Why manifests matter</h3>
<p><strong>Verification</strong>: Check if files have been modified</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Compare current hash with manifest</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>tools<span class="sc">::</span><span class="fu">md5sum</span>(<span class="st">&quot;_output/figure.png&quot;</span>)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co"># vs hash in manifest</span></span></code></pre></div>
<p><strong>Traceability</strong>: Link outputs to inputs</p>
<p>“This figure was generated from raw data version abc123… using code
commit def456…”</p>
<p><strong>Reproducibility</strong>: Ensure the right inputs</p>
<p>“To reproduce this analysis, restore raw-data v0.1.0”</p>
</div>
<div id="manifest-location" class="section level3">
<h3>Manifest location</h3>
<p>Manifests are stored in:</p>
<ul>
<li><code>manifest.csv</code> at project root (tracks all versions)</li>
<li>Dev builds also create temporary manifests in cache</li>
</ul>
</div>
<div id="querying-manifests" class="section level3">
<h3>Querying manifests</h3>
<p>projr provides functions to query the manifest and track changes
across versions:</p>
<p><strong>Find what changed between versions:</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># See what files changed between v0.0.1 and v0.0.2</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>changes <span class="ot">&lt;-</span> <span class="fu">projr_manifest_changes</span>(<span class="st">&quot;0.0.1&quot;</span>, <span class="st">&quot;0.0.2&quot;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="co"># Returns: label, fn, change_type (added/modified/removed), hash_from, hash_to</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co"># Filter by directory</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>output_changes <span class="ot">&lt;-</span> <span class="fu">projr_manifest_changes</span>(<span class="st">&quot;0.0.1&quot;</span>, <span class="st">&quot;0.0.2&quot;</span>, <span class="at">label =</span> <span class="st">&quot;output&quot;</span>)</span></code></pre></div>
<p><strong>Track files across a version range:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># See all files and when they last changed from v0.0.1 to current</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>file_history <span class="ot">&lt;-</span> <span class="fu">projr_manifest_range</span>(<span class="st">&quot;0.0.1&quot;</span>)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co"># Returns: label, fn, version_first, version_last_change, hash</span></span></code></pre></div>
<p><strong>Check when directories last changed:</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># See most recent changes for each directory</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>last_changes <span class="ot">&lt;-</span> <span class="fu">projr_manifest_last_change</span>()</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co"># Returns: label, version_last_change, n_files</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="archiving-and-restoration" class="section level2">
<h2>Archiving and restoration</h2>
<div id="archive-strategies" class="section level3">
<h3>Archive strategies</h3>
<p>projr supports two archiving strategies:</p>
<p><strong>1. Versioned archives</strong> (default)</p>
<p>Each build creates a new archive:</p>
<pre><code>GitHub Releases:
  v0.1.0/raw-data-v0.1.0.zip
  v0.1.1/raw-data-v0.1.1.zip
  v0.2.0/raw-data-v0.2.0.zip</code></pre>
<ul>
<li>Preserves all versions</li>
<li>Enables time travel</li>
<li>Uses more storage</li>
</ul>
<p><strong>2. Latest-only archives</strong></p>
<p>Each build overwrites the previous:</p>
<pre><code>GitHub Releases:
  latest/raw-data-latest.zip  (always current)</code></pre>
<ul>
<li>Saves storage space</li>
<li>Loses history</li>
<li>Faster downloads</li>
</ul>
<p><strong>Configure in <code>_projr.yml</code>:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="at">    </span><span class="fu">raw-data</span><span class="kw">:</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="at">      </span><span class="fu">strategy</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;archive&quot;</span><span class="co">  # or &quot;latest&quot;</span></span></code></pre></div>
</div>
<div id="archive-cues" class="section level3">
<h3>Archive cues</h3>
<p>Control when archives are uploaded:</p>
<ul>
<li><code>&quot;always&quot;</code> - Upload on every build</li>
<li><code>&quot;new&quot;</code> - Upload only if content changed (default)</li>
<li><code>&quot;never&quot;</code> - Don’t upload</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="at">    </span><span class="fu">raw-data</span><span class="kw">:</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="at">      </span><span class="fu">cue</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;new&quot;</span><span class="co">  # Only upload if raw data changed</span></span></code></pre></div>
</div>
<div id="restoration" class="section level3">
<h3>Restoration</h3>
<p>Restoration pulls archived content back:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># Restore from GitHub</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">projr_restore_repo</span>(<span class="st">&quot;owner/repo&quot;</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co"># Restore specific version</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="fu">projr_restore</span>(<span class="at">label =</span> <span class="st">&quot;raw-data&quot;</span>, <span class="at">version =</span> <span class="st">&quot;v0.1.0&quot;</span>)</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co"># Restore specific label</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="fu">projr_restore</span>(<span class="at">label =</span> <span class="st">&quot;output&quot;</span>)</span></code></pre></div>
<p><strong>Restoration order:</strong></p>
<p>projr checks sources in order:</p>
<ol style="list-style-type: decimal">
<li>GitHub Releases</li>
<li>OSF</li>
<li>Local archives</li>
</ol>
<p>The first available source is used.</p>
<hr />
</div>
</div>
<div id="profiles" class="section level2">
<h2>Profiles</h2>
<div id="what-are-profiles" class="section level3">
<h3>What are profiles?</h3>
<p>Profiles are alternative configurations for different contexts:</p>
<ul>
<li><strong>Development</strong> vs <strong>production</strong></li>
<li><strong>Public</strong> vs <strong>private</strong> sharing</li>
<li><strong>Individual</strong> vs <strong>collaborative</strong>
workflows</li>
</ul>
</div>
<div id="how-profiles-work" class="section level3">
<h3>How profiles work</h3>
<p>A profile is a separate YAML file:</p>
<pre><code>_projr.yml         # Default configuration
_projr-dev.yml     # Development profile
_projr-public.yml  # Public sharing profile</code></pre>
<p><strong>Activate a profile:</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">PROJR_PROFILE =</span> <span class="st">&quot;dev&quot;</span>)</span></code></pre></div>
<p>Or in <code>.Renviron</code>:</p>
<pre><code>PROJR_PROFILE=dev</code></pre>
</div>
<div id="profile-inheritance" class="section level3">
<h3>Profile inheritance</h3>
<p>Profiles only specify <strong>differences</strong> from
<code>_projr.yml</code>:</p>
<p><strong><code>_projr.yml</code>:</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="at">    </span><span class="fu">enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="at">    </span><span class="fu">raw-data</span><span class="kw">:</span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="at">  </span><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _output</span></span></code></pre></div>
<p><strong><code>_projr-dev.yml</code>:</strong></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="at">    </span><span class="fu">enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span><span class="co">  # Override: disable GitHub in dev</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="co"># All other settings inherited from _projr.yml</span></span></code></pre></div>
</div>
<div id="example-profiles" class="section level3">
<h3>Example profiles</h3>
<p><strong>Development profile</strong>
(<code>_projr-dev.yml</code>):</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="at">    </span><span class="fu">enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="at">  </span><span class="fu">git</span><span class="kw">:</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="at">    </span><span class="fu">commit</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<p><strong>Public sharing profile</strong>
(<code>_projr-public.yml</code>):</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">directories</span><span class="kw">:</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="at">  </span><span class="fu">raw-data</span><span class="kw">:</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> _raw_data_public</span><span class="co">  # Only public data</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="fu">build</span><span class="kw">:</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="at">  </span><span class="fu">github</span><span class="kw">:</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a><span class="at">    </span><span class="fu">raw-data</span><span class="kw">:</span></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="at">      </span><span class="fu">content</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">raw-data</span><span class="kw">]</span><span class="co">  # Share public data only</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="environment-variables" class="section level2">
<h2>Environment variables</h2>
<div id="configuration-via-environment" class="section level3">
<h3>Configuration via environment</h3>
<p>projr reads these environment variables:</p>
<p><strong><code>PROJR_PROFILE</code></strong></p>
<p>Activate a profile:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="bu">export</span> <span class="va">PROJR_PROFILE</span><span class="op">=</span>dev</span></code></pre></div>
<p><strong><code>PROJR_OUTPUT_CLEAR</code></strong></p>
<p>Control when <code>_output</code> is cleared:</p>
<ul>
<li><code>&quot;pre&quot;</code> - Clear before build (default)</li>
<li><code>&quot;post&quot;</code> - Clear after build</li>
<li><code>&quot;none&quot;</code> - Never clear</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="bu">export</span> <span class="va">PROJR_OUTPUT_CLEAR</span><span class="op">=</span>pre</span></code></pre></div>
<p><strong><code>PROJR_CACHE_CLEAR</code></strong></p>
<p>Control cache clearing (same options as above).</p>
</div>
<div id="setting-environment-variables" class="section level3">
<h3>Setting environment variables</h3>
<p><strong>In R:</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">PROJR_PROFILE =</span> <span class="st">&quot;dev&quot;</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="fu">Sys.setenv</span>(<span class="at">PROJR_OUTPUT_CLEAR =</span> <span class="st">&quot;pre&quot;</span>)</span></code></pre></div>
<p><strong>In <code>.Renviron</code>:</strong></p>
<pre><code>PROJR_PROFILE=dev
PROJR_OUTPUT_CLEAR=pre</code></pre>
<p><strong>Helper function:</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">projr_env_set</span>(</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>  <span class="at">profile =</span> <span class="st">&quot;dev&quot;</span>,</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>  <span class="at">output_clear =</span> <span class="st">&quot;pre&quot;</span></span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>)</span></code></pre></div>
<hr />
</div>
</div>
<div id="dependencies-and-renv" class="section level2">
<h2>Dependencies and renv</h2>
<div id="why-renv" class="section level3">
<h3>Why renv?</h3>
<p>R package versions change over time. Code that works today might
break in 6 months due to package updates.</p>
<p><strong>renv</strong> locks package versions:</p>
<pre><code>renv.lock:
  {
    &quot;R&quot;: {&quot;Version&quot;: &quot;4.3.0&quot;},
    &quot;Packages&quot;: {
      &quot;dplyr&quot;: {&quot;Version&quot;: &quot;1.1.0&quot;},
      &quot;ggplot2&quot;: {&quot;Version&quot;: &quot;3.4.0&quot;}
    }
  }</code></pre>
</div>
<div id="projr-renv" class="section level3">
<h3>projr + renv</h3>
<p>projr integrates with renv:</p>
<p><strong>Initialise:</strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">projr_init_renv</span>()</span></code></pre></div>
<p><strong>Update lockfile:</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">projr_renv_update</span>()  <span class="co"># Wrapper for renv::snapshot()</span></span></code></pre></div>
<p><strong>Restore packages:</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">projr_renv_restore</span>()  <span class="co"># Wrapper for renv::restore()</span></span></code></pre></div>
</div>
<div id="when-to-use-renv" class="section level3">
<h3>When to use renv</h3>
<p><strong>Use renv when:</strong></p>
<ul>
<li>Long-term reproducibility is critical</li>
<li>Collaborating across machines/time</li>
<li>Submitting to journals requiring reproducibility</li>
</ul>
<p><strong>Skip renv when:</strong></p>
<ul>
<li>Quick exploratory projects</li>
<li>Sharing code is low priority</li>
<li>Package versions are stable</li>
</ul>
<hr />
</div>
</div>
<div id="the-whole-game" class="section level2">
<h2>The whole game</h2>
<p>Putting it all together:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co"># 1. Initialise</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="fu">projr_init</span>()</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a><span class="co"># 2. Add raw data to _raw_data/</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a><span class="co"># 3. Write analysis code in .Rmd files</span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a><span class="co"># 4. Iterate with dev builds</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a><span class="fu">projr_build_dev</span>(<span class="st">&quot;analysis.Rmd&quot;</span>)</span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a><span class="co"># Check outputs in _tmp/projr/v0.0.1/</span></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a><span class="co"># 5. When ready, create first release</span></span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a><span class="fu">projr_build</span>()</span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a><span class="co"># Outputs in _output/, archived to GitHub</span></span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" tabindex="-1"></a><span class="co"># 6. Continue development</span></span>
<span id="cb39-17"><a href="#cb39-17" tabindex="-1"></a><span class="co"># ... edit code ...</span></span>
<span id="cb39-18"><a href="#cb39-18" tabindex="-1"></a><span class="fu">projr_build_dev</span>()</span>
<span id="cb39-19"><a href="#cb39-19" tabindex="-1"></a></span>
<span id="cb39-20"><a href="#cb39-20" tabindex="-1"></a><span class="co"># 7. Create minor release with new analysis</span></span>
<span id="cb39-21"><a href="#cb39-21" tabindex="-1"></a><span class="fu">projr_build_minor</span>()</span>
<span id="cb39-22"><a href="#cb39-22" tabindex="-1"></a></span>
<span id="cb39-23"><a href="#cb39-23" tabindex="-1"></a><span class="co"># 8. Share repository</span></span>
<span id="cb39-24"><a href="#cb39-24" tabindex="-1"></a><span class="co"># Collaborators run:</span></span>
<span id="cb39-25"><a href="#cb39-25" tabindex="-1"></a><span class="fu">projr_restore_repo</span>(<span class="st">&quot;you/your-project&quot;</span>)</span></code></pre></div>
<p><strong>Key takeaways:</strong></p>
<ul>
<li><strong>Directories</strong>: Organise by purpose (raw, cache,
output, docs)</li>
<li><strong>Versions</strong>: Link outputs to inputs via manifests</li>
<li><strong>Dev builds</strong>: Safe iteration without overwriting
releases</li>
<li><strong>Final builds</strong>: Versioned, archived, traceable
releases</li>
<li><strong>Restoration</strong>: One command to reconstruct
project</li>
</ul>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
