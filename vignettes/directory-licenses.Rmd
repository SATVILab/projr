---
title: "Directory Licenses"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Directory Licenses}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Overview

The `projr` package allows you to automatically add license files to specific directories in your project. This is particularly useful for:

- Licensing raw data separately from code
- Licensing outputs/results separately from code
- Licensing documentation separately from code
- Using different licenses for different parts of your project

## Setting Directory Licenses

You can set licenses for directories using the `projr_yml_dir_license_set()` function:

```{r eval=FALSE}
library(projr)

# Set a license for output directory (simple format)
projr_yml_dir_license_set("CC-BY", "output")

# Set a license for raw data with custom authors and year
projr_yml_dir_license_set(
  "MIT",
  "raw-data",
  authors = c("Jane Doe", "John Smith"),
  year = 2024
)

# Set a license for docs directory
projr_yml_dir_license_set("Apache-2.0", "docs")
```

## Supported License Types

The following license types are supported:

- **CC-BY** (Creative Commons Attribution 4.0) - Good for data and analysis projects
- **CC0** (Creative Commons Zero) - Dedicates to public domain
- **Apache-2.0** - Permissive with patent protection
- **MIT** - Simple permissive license
- **Proprietary** - Private code/data

Common variations are also accepted (e.g., "ccby", "apache", "mit").

## How It Works

When you run a build (`projr_build_dev()`, `projr_build_patch()`, etc.), `projr` will:

1. **Pre-build**: Create LICENSE files in input directories (raw-data, cache)
2. **Post-build**: Create LICENSE files in output directories (output, docs, data)

The LICENSE files are automatically excluded from manifest tracking, so they won't be versioned with your project outputs.

## Configuration Format

### Simple Format

Use just the license type. Authors and year are automatically determined:

```yaml
directories:
  output:
    path: _output
    license: CC-BY
```

### Full Format

Specify type, authors, and year explicitly:

```yaml
directories:
  raw-data:
    path: _raw_data
    license:
      type: MIT
      authors:
        - Jane Doe
        - John Smith
      year: 2024
```

## Checking and Removing Licenses

Get the current license configuration:

```{r eval=FALSE}
# Get license for a directory
projr_yml_dir_license_get("output")
```

Remove a license configuration:

```{r eval=FALSE}
# Remove license for a directory
projr_yml_dir_license_rm("output")
```

## Example Workflow

Here's a typical workflow for setting up licenses:

```{r eval=FALSE}
# Initialize project
projr_init()

# Set licenses for different directories
projr_yml_dir_license_set("CC-BY", "output")
projr_yml_dir_license_set("CC0", "raw-data")
projr_yml_dir_license_set("Apache-2.0", "docs")

# Create some content
# ... your analysis code ...

# Run build - LICENSE files will be automatically created
projr_build_dev()
```

After the build, you'll find LICENSE files in:
- `_raw_data/LICENSE` (CC0)
- `_output/LICENSE` (CC-BY)
- `docs/LICENSE` (Apache-2.0)

## Best Practices

1. **Choose appropriate licenses**: Use CC-BY or CC0 for data, Apache-2.0 or MIT for code
2. **Set licenses early**: Configure licenses before your first build
3. **Be consistent**: Use the same license type across similar directories
4. **Document your choices**: Explain why you chose particular licenses in your README

## Notes

- LICENSE files are automatically excluded from manifest tracking
- Default authors are taken from the DESCRIPTION file if available
- Default year is the current year
- License templates are stored in the package and can be customized
